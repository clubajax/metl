/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 11);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/* unknown exports provided */
/* all exports used */
/*!*****************************************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/BaseComponent/src/BaseComponent.js ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("\"use strict\";\n\n// class/component rules\n// always call super() first in the ctor. This also calls the extended class' ctor.\n// cannot call NEW on a Component class\n\n// Classes http://exploringjs.com/es6/ch_classes.html#_the-species-pattern-in-static-methods\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _on = __webpack_require__(/*! on */ 3);\nvar dom = __webpack_require__(/*! dom */ 1);\n\nvar BaseComponent = function (_HTMLElement) {\n    _inherits(BaseComponent, _HTMLElement);\n\n    function BaseComponent() {\n        _classCallCheck(this, BaseComponent);\n\n        var _this = _possibleConstructorReturn(this, (BaseComponent.__proto__ || Object.getPrototypeOf(BaseComponent)).call(this));\n\n        _this._uid = dom.uid(_this.localName);\n        privates[_this._uid] = { DOMSTATE: 'created' };\n        privates[_this._uid].handleList = [];\n        plugin('init', _this);\n        return _this;\n    }\n\n    _createClass(BaseComponent, [{\n        key: 'connectedCallback',\n        value: function connectedCallback() {\n            privates[this._uid].DOMSTATE = 'connected';\n            plugin('preConnected', this);\n            nextTick(onCheckDomReady.bind(this));\n            if (this.connected) {\n                this.connected();\n            }\n            this.fire('connected');\n            plugin('postConnected', this);\n        }\n    }, {\n        key: 'disconnectedCallback',\n        value: function disconnectedCallback() {\n            privates[this._uid].DOMSTATE = 'disconnected';\n            plugin('preDisconnected', this);\n            if (this.disconnected) {\n                this.disconnected();\n            }\n            this.fire('disconnected');\n        }\n    }, {\n        key: 'attributeChangedCallback',\n        value: function attributeChangedCallback(attrName, oldVal, newVal) {\n            plugin('preAttributeChanged', this, attrName, newVal, oldVal);\n            if (this.attributeChanged) {\n                this.attributeChanged(attrName, newVal, oldVal);\n            }\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.fire('destroy');\n            privates[this._uid].handleList.forEach(function (handle) {\n                handle.remove();\n            });\n            dom.destroy(this);\n        }\n    }, {\n        key: 'fire',\n        value: function fire(eventName, eventDetail, bubbles) {\n            return _on.fire(this, eventName, eventDetail, bubbles);\n        }\n    }, {\n        key: 'emit',\n        value: function emit(eventName, value) {\n            return _on.emit(this, eventName, value);\n        }\n    }, {\n        key: 'on',\n        value: function on(node, eventName, selector, callback) {\n            return this.registerHandle(typeof node != 'string' ? // no node is supplied\n            _on(node, eventName, selector, callback) : _on(this, node, eventName, selector));\n        }\n    }, {\n        key: 'once',\n        value: function once(node, eventName, selector, callback) {\n            return this.registerHandle(typeof node != 'string' ? // no node is supplied\n            _on.once(node, eventName, selector, callback) : _on.once(this, node, eventName, selector, callback));\n        }\n    }, {\n        key: 'registerHandle',\n        value: function registerHandle(handle) {\n            privates[this._uid].handleList.push(handle);\n            return handle;\n        }\n    }, {\n        key: 'DOMSTATE',\n        get: function get() {\n            return privates[this._uid].DOMSTATE;\n        }\n    }], [{\n        key: 'clone',\n        value: function clone(template) {\n            if (template.content && template.content.children) {\n                return document.importNode(template.content, true);\n            }\n            var frag = document.createDocumentFragment(),\n                cloneNode = document.createElement('div');\n            cloneNode.innerHTML = template.innerHTML;\n\n            while (cloneNode.children.length) {\n                frag.appendChild(cloneNode.children[0]);\n            }\n            return frag;\n        }\n    }, {\n        key: 'addPlugin',\n        value: function addPlugin(plug) {\n            var i,\n                order = plug.order || 100;\n            if (!plugins.length) {\n                plugins.push(plug);\n            } else if (plugins.length === 1) {\n                if (plugins[0].order <= order) {\n                    plugins.push(plug);\n                } else {\n                    plugins.unshift(plug);\n                }\n            } else if (plugins[0].order > order) {\n                plugins.unshift(plug);\n            } else {\n\n                for (i = 1; i < plugins.length; i++) {\n                    if (order === plugins[i - 1].order || order > plugins[i - 1].order && order < plugins[i].order) {\n                        plugins.splice(i, 0, plug);\n                        return;\n                    }\n                }\n                // was not inserted...\n                plugins.push(plug);\n            }\n        }\n    }]);\n\n    return BaseComponent;\n}(HTMLElement);\n\nvar privates = {},\n    plugins = [];\n\nfunction plugin(method, node, a, b, c) {\n    plugins.forEach(function (plug) {\n        if (plug[method]) {\n            plug[method](node, a, b, c);\n        }\n    });\n}\n\nfunction onCheckDomReady() {\n    if (this.DOMSTATE != 'connected' || privates[this._uid].domReadyFired) {\n        return;\n    }\n\n    var count = 0,\n        children = getChildCustomNodes(this),\n        ourDomReady = onDomReady.bind(this);\n\n    function addReady() {\n        count++;\n        if (count == children.length) {\n            ourDomReady();\n        }\n    }\n\n    // If no children, we're good - leaf node. Commence with onDomReady\n    //\n    if (!children.length) {\n        ourDomReady();\n    } else {\n        // else, wait for all children to fire their `ready` events\n        //\n        children.forEach(function (child) {\n            // check if child is already ready\n            if (child.DOMSTATE == 'domready') {\n                addReady();\n            }\n            // if not, wait for event\n            child.on('domready', addReady);\n        });\n    }\n}\n\nfunction onDomReady() {\n    privates[this._uid].DOMSTATE = 'domready';\n    // domReady should only ever fire once\n    privates[this._uid].domReadyFired = true;\n    plugin('preDomReady', this);\n    // call this.domReady first, so that the component\n    // can finish initializing before firing any\n    // subsequent events\n    if (this.domReady) {\n        this.domReady();\n        this.domReady = function () {};\n    }\n\n    this.fire('domready');\n\n    plugin('postDomReady', this);\n}\n\nfunction getChildCustomNodes(node) {\n    // collect any children that are custom nodes\n    // used to check if their dom is ready before\n    // determining if this is ready\n    var i,\n        nodes = [];\n    for (i = 0; i < node.children.length; i++) {\n        if (node.children[i].nodeName.indexOf('-') > -1) {\n            nodes.push(node.children[i]);\n        }\n    }\n    return nodes;\n}\n\nfunction nextTick(cb) {\n    requestAnimationFrame(cb);\n}\n\nwindow.onDomReady = function (node, callback) {\n    function onReady() {\n        callback(node);\n        node.removeEventListener('domready', onReady);\n    }\n    if (node.DOMSTATE === 'domready') {\n        callback(node);\n    } else {\n        node.addEventListener('domready', onReady);\n    }\n};\n\nexports.default = BaseComponent;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvQmFzZUNvbXBvbmVudC9zcmMvQmFzZUNvbXBvbmVudC5qcz9lMDZhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vLyBjbGFzcy9jb21wb25lbnQgcnVsZXNcbi8vIGFsd2F5cyBjYWxsIHN1cGVyKCkgZmlyc3QgaW4gdGhlIGN0b3IuIFRoaXMgYWxzbyBjYWxscyB0aGUgZXh0ZW5kZWQgY2xhc3MnIGN0b3IuXG4vLyBjYW5ub3QgY2FsbCBORVcgb24gYSBDb21wb25lbnQgY2xhc3NcblxuLy8gQ2xhc3NlcyBodHRwOi8vZXhwbG9yaW5nanMuY29tL2VzNi9jaF9jbGFzc2VzLmh0bWwjX3RoZS1zcGVjaWVzLXBhdHRlcm4taW4tc3RhdGljLW1ldGhvZHNcblxuY29uc3Qgb24gPSByZXF1aXJlKCdvbicpO1xuY29uc3QgZG9tID0gcmVxdWlyZSgnZG9tJyk7XG5cbmNsYXNzIEJhc2VDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3VpZCA9IGRvbS51aWQodGhpcy5sb2NhbE5hbWUpO1xuICAgICAgICBwcml2YXRlc1t0aGlzLl91aWRdID0ge0RPTVNUQVRFOiAnY3JlYXRlZCd9O1xuICAgICAgICBwcml2YXRlc1t0aGlzLl91aWRdLmhhbmRsZUxpc3QgPSBbXTtcbiAgICAgICAgcGx1Z2luKCdpbml0JywgdGhpcyk7XG4gICAgfVxuICAgIFxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBwcml2YXRlc1t0aGlzLl91aWRdLkRPTVNUQVRFID0gJ2Nvbm5lY3RlZCc7XG4gICAgICAgIHBsdWdpbigncHJlQ29ubmVjdGVkJywgdGhpcyk7XG4gICAgICAgIG5leHRUaWNrKG9uQ2hlY2tEb21SZWFkeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlyZSgnY29ubmVjdGVkJyk7XG4gICAgICAgIHBsdWdpbigncG9zdENvbm5lY3RlZCcsIHRoaXMpO1xuICAgIH1cblxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBwcml2YXRlc1t0aGlzLl91aWRdLkRPTVNUQVRFID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgICAgIHBsdWdpbigncHJlRGlzY29ubmVjdGVkJywgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpcmUoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyTmFtZSwgb2xkVmFsLCBuZXdWYWwpIHtcbiAgICAgICAgcGx1Z2luKCdwcmVBdHRyaWJ1dGVDaGFuZ2VkJywgdGhpcywgYXR0ck5hbWUsIG5ld1ZhbCwgb2xkVmFsKTtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkKGF0dHJOYW1lLCBuZXdWYWwsIG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmZpcmUoJ2Rlc3Ryb3knKTtcbiAgICAgICAgcHJpdmF0ZXNbdGhpcy5fdWlkXS5oYW5kbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICAgICAgaGFuZGxlLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgZG9tLmRlc3Ryb3kodGhpcyk7XG4gICAgfVxuXG4gICAgZmlyZShldmVudE5hbWUsIGV2ZW50RGV0YWlsLCBidWJibGVzKSB7XG4gICAgICAgIHJldHVybiBvbi5maXJlKHRoaXMsIGV2ZW50TmFtZSwgZXZlbnREZXRhaWwsIGJ1YmJsZXMpO1xuICAgIH1cblxuICAgIGVtaXQoZXZlbnROYW1lLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gb24uZW1pdCh0aGlzLCBldmVudE5hbWUsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBvbihub2RlLCBldmVudE5hbWUsIHNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlckhhbmRsZShcbiAgICAgICAgICAgIHR5cGVvZiBub2RlICE9ICdzdHJpbmcnID8gLy8gbm8gbm9kZSBpcyBzdXBwbGllZFxuICAgICAgICAgICAgICAgIG9uKG5vZGUsIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKSA6XG4gICAgICAgICAgICAgICAgb24odGhpcywgbm9kZSwgZXZlbnROYW1lLCBzZWxlY3RvcikpO1xuICAgIH1cblxuICAgIG9uY2Uobm9kZSwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJIYW5kbGUoXG4gICAgICAgICAgICB0eXBlb2Ygbm9kZSAhPSAnc3RyaW5nJyA/IC8vIG5vIG5vZGUgaXMgc3VwcGxpZWRcbiAgICAgICAgICAgICAgICBvbi5vbmNlKG5vZGUsIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKSA6XG4gICAgICAgICAgICAgICAgb24ub25jZSh0aGlzLCBub2RlLCBldmVudE5hbWUsIHNlbGVjdG9yLCBjYWxsYmFjaykpO1xuICAgIH1cblxuICAgIHJlZ2lzdGVySGFuZGxlKGhhbmRsZSkge1xuICAgICAgICBwcml2YXRlc1t0aGlzLl91aWRdLmhhbmRsZUxpc3QucHVzaChoYW5kbGUpO1xuICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgIH1cblxuICAgIGdldCBET01TVEFURSgpIHtcbiAgICAgICAgcmV0dXJuIHByaXZhdGVzW3RoaXMuX3VpZF0uRE9NU1RBVEU7XG4gICAgfVxuXG4gICAgc3RhdGljIGNsb25lKHRlbXBsYXRlKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZS5jb250ZW50ICYmIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlLmNvbnRlbnQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhclxuICAgICAgICAgICAgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgICAgICAgIGNsb25lTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjbG9uZU5vZGUuaW5uZXJIVE1MID0gdGVtcGxhdGUuaW5uZXJIVE1MO1xuXG4gICAgICAgIHdoaWxlIChjbG9uZU5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGNsb25lTm9kZS5jaGlsZHJlblswXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZFBsdWdpbihwbHVnKSB7XG4gICAgICAgIHZhciBpLCBvcmRlciA9IHBsdWcub3JkZXIgfHwgMTAwO1xuICAgICAgICBpZiAoIXBsdWdpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBwbHVnaW5zLnB1c2gocGx1Zyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGx1Z2lucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGlmIChwbHVnaW5zWzBdLm9yZGVyIDw9IG9yZGVyKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2lucy5wdXNoKHBsdWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGx1Z2lucy51bnNoaWZ0KHBsdWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBsdWdpbnNbMF0ub3JkZXIgPiBvcmRlcikge1xuICAgICAgICAgICAgcGx1Z2lucy51bnNoaWZ0KHBsdWcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChvcmRlciA9PT0gcGx1Z2luc1tpIC0gMV0ub3JkZXIgfHwgKG9yZGVyID4gcGx1Z2luc1tpIC0gMV0ub3JkZXIgJiYgb3JkZXIgPCBwbHVnaW5zW2ldLm9yZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zLnNwbGljZShpLCAwLCBwbHVnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdhcyBub3QgaW5zZXJ0ZWQuLi5cbiAgICAgICAgICAgIHBsdWdpbnMucHVzaChwbHVnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0XG4gICAgcHJpdmF0ZXMgPSB7fSxcbiAgICBwbHVnaW5zID0gW107XG5cbmZ1bmN0aW9uIHBsdWdpbihtZXRob2QsIG5vZGUsIGEsIGIsIGMpIHtcbiAgICBwbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWcpIHtcbiAgICAgICAgaWYgKHBsdWdbbWV0aG9kXSkge1xuICAgICAgICAgICAgcGx1Z1ttZXRob2RdKG5vZGUsIGEsIGIsIGMpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uQ2hlY2tEb21SZWFkeSgpIHtcbiAgICBpZiAodGhpcy5ET01TVEFURSAhPSAnY29ubmVjdGVkJyB8fCBwcml2YXRlc1t0aGlzLl91aWRdLmRvbVJlYWR5RmlyZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICBjb3VudCA9IDAsXG4gICAgICAgIGNoaWxkcmVuID0gZ2V0Q2hpbGRDdXN0b21Ob2Rlcyh0aGlzKSxcbiAgICAgICAgb3VyRG9tUmVhZHkgPSBvbkRvbVJlYWR5LmJpbmQodGhpcyk7XG5cbiAgICBmdW5jdGlvbiBhZGRSZWFkeSgpIHtcbiAgICAgICAgY291bnQrKztcbiAgICAgICAgaWYgKGNvdW50ID09IGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgb3VyRG9tUmVhZHkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIGNoaWxkcmVuLCB3ZSdyZSBnb29kIC0gbGVhZiBub2RlLiBDb21tZW5jZSB3aXRoIG9uRG9tUmVhZHlcbiAgICAvL1xuICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIG91ckRvbVJlYWR5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBlbHNlLCB3YWl0IGZvciBhbGwgY2hpbGRyZW4gdG8gZmlyZSB0aGVpciBgcmVhZHlgIGV2ZW50c1xuICAgICAgICAvL1xuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgY2hpbGQgaXMgYWxyZWFkeSByZWFkeVxuICAgICAgICAgICAgaWYgKGNoaWxkLkRPTVNUQVRFID09ICdkb21yZWFkeScpIHtcbiAgICAgICAgICAgICAgICBhZGRSZWFkeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgbm90LCB3YWl0IGZvciBldmVudFxuICAgICAgICAgICAgY2hpbGQub24oJ2RvbXJlYWR5JywgYWRkUmVhZHkpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9uRG9tUmVhZHkoKSB7XG4gICAgcHJpdmF0ZXNbdGhpcy5fdWlkXS5ET01TVEFURSA9ICdkb21yZWFkeSc7XG4gICAgLy8gZG9tUmVhZHkgc2hvdWxkIG9ubHkgZXZlciBmaXJlIG9uY2VcbiAgICBwcml2YXRlc1t0aGlzLl91aWRdLmRvbVJlYWR5RmlyZWQgPSB0cnVlO1xuICAgIHBsdWdpbigncHJlRG9tUmVhZHknLCB0aGlzKTtcbiAgICAvLyBjYWxsIHRoaXMuZG9tUmVhZHkgZmlyc3QsIHNvIHRoYXQgdGhlIGNvbXBvbmVudFxuICAgIC8vIGNhbiBmaW5pc2ggaW5pdGlhbGl6aW5nIGJlZm9yZSBmaXJpbmcgYW55XG4gICAgLy8gc3Vic2VxdWVudCBldmVudHNcbiAgICBpZiAodGhpcy5kb21SZWFkeSkge1xuICAgICAgICB0aGlzLmRvbVJlYWR5KCk7XG4gICAgICAgIHRoaXMuZG9tUmVhZHkgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLmZpcmUoJ2RvbXJlYWR5Jyk7XG5cbiAgICBwbHVnaW4oJ3Bvc3REb21SZWFkeScsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBnZXRDaGlsZEN1c3RvbU5vZGVzKG5vZGUpIHtcbiAgICAvLyBjb2xsZWN0IGFueSBjaGlsZHJlbiB0aGF0IGFyZSBjdXN0b20gbm9kZXNcbiAgICAvLyB1c2VkIHRvIGNoZWNrIGlmIHRoZWlyIGRvbSBpcyByZWFkeSBiZWZvcmVcbiAgICAvLyBkZXRlcm1pbmluZyBpZiB0aGlzIGlzIHJlYWR5XG4gICAgdmFyIGksIG5vZGVzID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW5baV0ubm9kZU5hbWUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZS5jaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzO1xufVxuXG5mdW5jdGlvbiBuZXh0VGljayhjYikge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG59XG5cbndpbmRvdy5vbkRvbVJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIGNhbGxiYWNrKSB7XG4gICAgZnVuY3Rpb24gb25SZWFkeSAoKSB7XG4gICAgICAgIGNhbGxiYWNrKG5vZGUpO1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RvbXJlYWR5Jywgb25SZWFkeSk7XG4gICAgfVxuICAgIGlmKG5vZGUuRE9NU1RBVEUgPT09ICdkb21yZWFkeScpe1xuICAgICAgICBjYWxsYmFjayhub2RlKTtcbiAgICB9ZWxzZXtcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdkb21yZWFkeScsIG9uUmVhZHkpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VDb21wb25lbnQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy9CYXNlQ29tcG9uZW50L3NyYy9CYXNlQ29tcG9uZW50LmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7QUFFQTs7O0FBRUE7QUFDQTtBQUVBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQXJIQTtBQUNBO0FBdUhBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 1 */
/* unknown exports provided */
/* all exports used */
/*!*********************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/dom/src/dom.js ***!
  \*********************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* UMD.define */(function (root, factory) {\n    if (typeof customLoader === 'function') {\n        customLoader(factory, 'dom');\n    } else if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n        module.exports = factory();\n    } else {\n        root.returnExports = factory();window.dom = factory();\n    }\n})(undefined, function () {\n    //  convenience library for common DOM methods\n    //      dom()\n    //          create dom nodes\n    //      dom.style()\n    //          set/get node style\n    //      dom.attr()\n    //          set/get attributes\n    //      dom.destroy()\n    //          obliterates a node\n    //      dom.box()\n    //          get node dimensions\n    //      dom.uid()\n    //          get a unique ID (not dom specific)\n    //\n    var isFloat = {\n        opacity: 1,\n        zIndex: 1,\n        'z-index': 1\n    },\n        isDimension = {\n        width: 1,\n        height: 1,\n        top: 1,\n        left: 1,\n        right: 1,\n        bottom: 1,\n        maxWidth: 1,\n        'max-width': 1,\n        minWidth: 1,\n        'min-width': 1,\n        maxHeight: 1,\n        'max-height': 1\n    },\n        uids = {},\n        destroyer = document.createElement('div');\n\n    function uid(type) {\n        if (!uids[type]) {\n            uids[type] = [];\n        }\n        var id = type + '-' + (uids[type].length + 1);\n        uids[type].push(id);\n        return id;\n    }\n\n    function isNode(item) {\n        // safer test for custom elements in FF (with wc shim)\n        return !!item && (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && typeof item.innerHTML === 'string';\n    }\n\n    function getNode(item) {\n\n        if (!item) {\n            return item;\n        }\n        if (typeof item === 'string') {\n            return document.getElementById(item);\n        }\n        // de-jqueryify\n        return item.get ? item.get(0) :\n        // item is a dom node\n        item;\n    }\n\n    function byId(id) {\n        return getNode(id);\n    }\n\n    function style(node, prop, value) {\n        // get/set node style(s)\n        //      prop: string or object\n        //\n        var key, computed;\n        if ((typeof prop === 'undefined' ? 'undefined' : _typeof(prop)) === 'object') {\n            // object setter\n            for (key in prop) {\n                if (prop.hasOwnProperty(key)) {\n                    style(node, key, prop[key]);\n                }\n            }\n            return null;\n        } else if (value !== undefined) {\n            // property setter\n            if (typeof value === 'number' && isDimension[prop]) {\n                value += 'px';\n            }\n            node.style[prop] = value;\n\n            if (prop === 'userSelect') {\n                value = !!value ? 'text' : 'none';\n                style(node, {\n                    webkitTouchCallout: value,\n                    webkitUserSelect: value,\n                    khtmlUserSelect: value,\n                    mozUserSelect: value,\n                    msUserSelect: value\n                });\n            }\n        }\n\n        // getter, if a simple style\n        if (node.style[prop]) {\n            if (isDimension[prop]) {\n                return parseInt(node.style[prop], 10);\n            }\n            if (isFloat[prop]) {\n                return parseFloat(node.style[prop]);\n            }\n            return node.style[prop];\n        }\n\n        // getter, computed\n        computed = getComputedStyle(node, prop);\n        if (computed[prop]) {\n            if (/\\d/.test(computed[prop])) {\n                if (!isNaN(parseInt(computed[prop], 10))) {\n                    return parseInt(computed[prop], 10);\n                }\n                return computed[prop];\n            }\n            return computed[prop];\n        }\n        return '';\n    }\n\n    function attr(node, prop, value) {\n        // get/set node attribute(s)\n        //      prop: string or object\n        //\n        var key;\n        if ((typeof prop === 'undefined' ? 'undefined' : _typeof(prop)) === 'object') {\n            for (key in prop) {\n                if (prop.hasOwnProperty(key)) {\n                    attr(node, key, prop[key]);\n                }\n            }\n            return null;\n        } else if (value !== undefined) {\n            if (prop === 'text' || prop === 'html' || prop === 'innerHTML') {\n                node.innerHTML = value;\n            } else {\n                node.setAttribute(prop, value);\n            }\n        }\n\n        return node.getAttribute(prop);\n    }\n\n    function box(node) {\n        if (node === window) {\n            node = document.documentElement;\n        }\n        // node dimensions\n        // returned object is immutable\n        // add scroll positioning and convenience abbreviations\n        var dimensions = getNode(node).getBoundingClientRect();\n        return {\n            top: dimensions.top,\n            right: dimensions.right,\n            bottom: dimensions.bottom,\n            left: dimensions.left,\n            height: dimensions.height,\n            h: dimensions.height,\n            width: dimensions.width,\n            w: dimensions.width,\n            scrollY: window.scrollY,\n            scrollX: window.scrollX,\n            x: dimensions.left + window.pageXOffset,\n            y: dimensions.top + window.pageYOffset\n        };\n    }\n\n    function query(node, selector) {\n        if (!selector) {\n            selector = node;\n            node = document;\n        }\n        return node.querySelector(selector);\n    }\n\n    function queryAll(node, selector) {\n        if (!selector) {\n            selector = node;\n            node = document;\n        }\n        var nodes = node.querySelectorAll(selector);\n\n        if (!nodes.length) {\n            return [];\n        }\n\n        // convert to Array and return it\n        return Array.prototype.slice.call(nodes);\n    }\n\n    function toDom(html, options, parent) {\n        // create a node from an HTML string\n        var node = dom('div', { html: html });\n        parent = byId(parent || options);\n        if (parent) {\n            while (node.firstChild) {\n                parent.appendChild(node.firstChild);\n            }\n            return node.firstChild;\n        }\n        if (html.indexOf('<') !== 0) {\n            return node;\n        }\n        return node.firstChild;\n    }\n\n    function fromDom(node) {\n        function getAttrs(node) {\n            var att,\n                i,\n                attrs = {};\n            for (i = 0; i < node.attributes.length; i++) {\n                att = node.attributes[i];\n                attrs[att.localName] = normalize(att.value === '' ? true : att.value);\n            }\n            return attrs;\n        }\n        function getText(node) {\n            var i,\n                t,\n                text = '';\n            for (i = 0; i < node.childNodes.length; i++) {\n                t = node.childNodes[i];\n                if (t.nodeType === 3 && t.textContent.trim()) {\n                    text += t.textContent.trim();\n                }\n            }\n            return text;\n        }\n        var i,\n            object = getAttrs(node);\n        object.text = getText(node);\n        object.children = [];\n        if (node.children.length) {\n            for (i = 0; i < node.children.length; i++) {\n                object.children.push(fromDom(node.children[i]));\n            }\n        }\n        return object;\n    }\n\n    function addChildren(node, children) {\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n                node.appendChild(children[i]);\n            }\n        } else {\n            node.appendChild(children);\n        }\n    }\n\n    function addContent(node, options) {\n        var html;\n        if (options.html !== undefined || options.innerHTML !== undefined) {\n            html = options.html || options.innerHTML || '';\n            if ((typeof html === 'undefined' ? 'undefined' : _typeof(html)) === 'object') {\n                addChildren(node, html);\n            } else {\n                node.innerHTML = html;\n            }\n\n            // misses some HTML, such as entities (&npsp;)\n            //else if(html.indexOf('<') === 0) {\n            //    node.innerHTML = html;\n            //}\n            //else{\n            //    node.appendChild(document.createTextNode(html));\n            //}\n        }\n        if (options.text) {\n            node.appendChild(document.createTextNode(options.text));\n        }\n        if (options.children) {\n            addChildren(node, options.children);\n        }\n    }\n\n    function dom(nodeType, options, parent, prepend) {\n        // create a node\n        // if first argument is a string and starts with <, it is assumed\n        // to use toDom, and creates a node from HTML. Optional second arg is\n        // parent to append to\n        // else:\n        //      nodeType: string, type of node to create\n        //      options: object with style, className, or attr properties\n        //          (can also be objects)\n        //      parent: Node, optional node to append to\n        //      prepend: truthy, to append node as the first child\n        //\n        if (nodeType.indexOf('<') === 0) {\n            return toDom(nodeType, options, parent);\n        }\n\n        options = options || {};\n        var className = options.css || options.className || options.class,\n            node = document.createElement(nodeType);\n\n        parent = getNode(parent);\n\n        if (className) {\n            node.className = className;\n        }\n\n        addContent(node, options);\n\n        if (options.cssText) {\n            node.style.cssText = options.cssText;\n        }\n\n        if (options.id) {\n            node.id = options.id;\n        }\n\n        if (options.style) {\n            style(node, options.style);\n        }\n\n        if (options.attr) {\n            attr(node, options.attr);\n        }\n\n        if (parent && isNode(parent)) {\n            if (prepend && parent.hasChildNodes()) {\n                parent.insertBefore(node, parent.children[0]);\n            } else {\n                parent.appendChild(node);\n            }\n        }\n\n        return node;\n    }\n\n    function getNextSibling(node) {\n        var sibling = node;\n        while (sibling) {\n            sibling = sibling.nextSibling;\n            if (sibling && sibling.nodeType === 1) {\n                return sibling;\n            }\n        }\n        return null;\n    }\n\n    function insertAfter(refNode, node) {\n        var sibling = getNextSibling(refNode);\n        if (!sibling) {\n            refNode.parentNode.appendChild(node);\n        } else {\n            refNode.parentNode.insertBefore(node, sibling);\n        }\n        return sibling;\n    }\n\n    function destroy(node) {\n        // destroys a node completely\n        //\n        if (node) {\n            destroyer.appendChild(node);\n            destroyer.innerHTML = '';\n        }\n    }\n\n    function clean(node, dispose) {\n        //\tRemoves all child nodes\n        //\t\tdispose: destroy child nodes\n        if (dispose) {\n            while (node.children.length) {\n                destroy(node.children[0]);\n            }\n            return;\n        }\n        while (node.children.length) {\n            node.removeChild(node.children[0]);\n        }\n    }\n\n    function ancestor(node, selector) {\n        // TODO: replace this with 'closest' and 'matches'\n        // gets the ancestor of node based on selector criteria\n        // useful for getting the target node when a child node is clicked upon\n        //\n        // USAGE\n        //      on.selector(childNode, '.app.active');\n        //      on.selector(childNode, '#thinger');\n        //      on.selector(childNode, 'div');\n        //\tDOES NOT SUPPORT:\n        //\t\tcombinations of above\n        var test,\n            parent = node;\n\n        if (selector.indexOf('.') === 0) {\n            // className\n            selector = selector.replace('.', ' ').trim();\n            test = function test(n) {\n                return n.classList.contains(selector);\n            };\n        } else if (selector.indexOf('#') === 0) {\n            // node id\n            selector = selector.replace('#', '').trim();\n            test = function test(n) {\n                return n.id === selector;\n            };\n        } else if (selector.indexOf('[') > -1) {\n            // attribute\n            console.error('attribute selectors are not yet supported');\n        } else {\n            // assuming node name\n            selector = selector.toUpperCase();\n            test = function test(n) {\n                return n.nodeName === selector;\n            };\n        }\n\n        while (parent) {\n            if (parent === document.body || parent === document) {\n                return false;\n            }\n            if (test(parent)) {\n                break;\n            }\n            parent = parent.parentNode;\n        }\n\n        return parent;\n    }\n\n    dom.classList = {\n        remove: function remove(node, names) {\n            toArray(names).forEach(function (name) {\n                node.classList.remove(name);\n            });\n        },\n        add: function add(node, names) {\n            toArray(names).forEach(function (name) {\n                node.classList.add(name);\n            });\n        },\n        contains: function contains(node, names) {\n            return toArray(names).every(function (name) {\n                return node.classList.contains(name);\n            });\n        },\n        toggle: function toggle(node, names, value) {\n            names = toArray(names);\n            if (typeof value === 'undefined') {\n                // use standard functionality, supported by IE\n                names.forEach(function (name) {\n                    node.classList.toggle(name, value);\n                });\n            }\n            // IE11 does not support the second parameter  \n            else if (value) {\n                    names.forEach(function (name) {\n                        node.classList.add(name);\n                    });\n                } else {\n                    names.forEach(function (name) {\n                        node.classList.remove(name);\n                    });\n                }\n        }\n    };\n\n    function toArray(names) {\n        if (!names) {\n            console.error('dom.classList should include a node and a className');\n            return [];\n        }\n        return names.split(' ').map(function (name) {\n            return name.trim();\n        });\n    }\n\n    if (!window.requestAnimationFrame) {\n        dom.requestAnimationFrame = function (callback) {\n            setTimeout(callback, 0);\n        };\n    } else {\n        dom.requestAnimationFrame = function (cb) {\n            window.requestAnimationFrame(cb);\n        };\n    }\n\n    function normalize(val) {\n        if (val === 'false') {\n            return false;\n        } else if (val === 'true') {\n            return true;\n        }\n        if (!isNaN(parseFloat(val))) {\n            return parseFloat(val);\n        }\n        return val;\n    }\n\n    dom.normalize = normalize;\n    dom.clean = clean;\n    dom.query = query;\n    dom.queryAll = queryAll;\n    dom.byId = byId;\n    dom.attr = attr;\n    dom.box = box;\n    dom.style = style;\n    dom.destroy = destroy;\n    dom.uid = uid;\n    dom.isNode = isNode;\n    dom.ancestor = ancestor;\n    dom.toDom = toDom;\n    dom.fromDom = fromDom;\n    dom.insertAfter = insertAfter;\n    dom.getNextSibling = getNextSibling;\n\n    return dom;\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvZG9tL3NyYy9kb20uanM/NDE3OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBVTUQuZGVmaW5lICovIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgY3VzdG9tTG9hZGVyID09PSAnZnVuY3Rpb24nKXsgY3VzdG9tTG9hZGVyKGZhY3RvcnksICdkb20nKTsgfWVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgeyBkZWZpbmUoW10sIGZhY3RvcnkpOyB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgeyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsgfSBlbHNlIHsgcm9vdC5yZXR1cm5FeHBvcnRzID0gZmFjdG9yeSgpOyB3aW5kb3cuZG9tID0gZmFjdG9yeSgpOyB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgY29udmVuaWVuY2UgbGlicmFyeSBmb3IgY29tbW9uIERPTSBtZXRob2RzXG4gICAgLy8gICAgICBkb20oKVxuICAgIC8vICAgICAgICAgIGNyZWF0ZSBkb20gbm9kZXNcbiAgICAvLyAgICAgIGRvbS5zdHlsZSgpXG4gICAgLy8gICAgICAgICAgc2V0L2dldCBub2RlIHN0eWxlXG4gICAgLy8gICAgICBkb20uYXR0cigpXG4gICAgLy8gICAgICAgICAgc2V0L2dldCBhdHRyaWJ1dGVzXG4gICAgLy8gICAgICBkb20uZGVzdHJveSgpXG4gICAgLy8gICAgICAgICAgb2JsaXRlcmF0ZXMgYSBub2RlXG4gICAgLy8gICAgICBkb20uYm94KClcbiAgICAvLyAgICAgICAgICBnZXQgbm9kZSBkaW1lbnNpb25zXG4gICAgLy8gICAgICBkb20udWlkKClcbiAgICAvLyAgICAgICAgICBnZXQgYSB1bmlxdWUgSUQgKG5vdCBkb20gc3BlY2lmaWMpXG4gICAgLy9cbiAgICB2YXJcbiAgICAgICAgaXNGbG9hdCA9IHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB6SW5kZXg6IDEsXG4gICAgICAgICAgICAnei1pbmRleCc6IDFcbiAgICAgICAgfSxcbiAgICAgICAgaXNEaW1lbnNpb24gPSB7XG4gICAgICAgICAgICB3aWR0aDoxLFxuICAgICAgICAgICAgaGVpZ2h0OjEsXG4gICAgICAgICAgICB0b3A6MSxcbiAgICAgICAgICAgIGxlZnQ6MSxcbiAgICAgICAgICAgIHJpZ2h0OjEsXG4gICAgICAgICAgICBib3R0b206MSxcbiAgICAgICAgICAgIG1heFdpZHRoOjEsXG4gICAgICAgICAgICAnbWF4LXdpZHRoJzoxLFxuICAgICAgICAgICAgbWluV2lkdGg6MSxcbiAgICAgICAgICAgICdtaW4td2lkdGgnOjEsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6MSxcbiAgICAgICAgICAgICdtYXgtaGVpZ2h0JzoxXG4gICAgICAgIH0sXG4gICAgICAgIHVpZHMgPSB7fSxcbiAgICAgICAgZGVzdHJveWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBmdW5jdGlvbiB1aWQgKHR5cGUpe1xuICAgICAgICBpZighdWlkc1t0eXBlXSl7XG4gICAgICAgICAgICB1aWRzW3R5cGVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkID0gdHlwZSArICctJyArICh1aWRzW3R5cGVdLmxlbmd0aCArIDEpO1xuICAgICAgICB1aWRzW3R5cGVdLnB1c2goaWQpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNOb2RlIChpdGVtKXtcbiAgICAgICAgLy8gc2FmZXIgdGVzdCBmb3IgY3VzdG9tIGVsZW1lbnRzIGluIEZGICh3aXRoIHdjIHNoaW0pXG4gICAgICAgIHJldHVybiAhIWl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmIHR5cGVvZiBpdGVtLmlubmVySFRNTCA9PT0gJ3N0cmluZyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Tm9kZSAoaXRlbSl7XG5cbiAgICAgICAgaWYoIWl0ZW0peyByZXR1cm4gaXRlbTsgfVxuICAgICAgICBpZih0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpe1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRlLWpxdWVyeWlmeVxuICAgICAgICByZXR1cm4gaXRlbS5nZXQgPyBpdGVtLmdldCgwKSA6XG4gICAgICAgICAgICAvLyBpdGVtIGlzIGEgZG9tIG5vZGVcbiAgICAgICAgICAgIGl0ZW07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnlJZCAoaWQpe1xuICAgICAgICByZXR1cm4gZ2V0Tm9kZShpZCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3R5bGUgKG5vZGUsIHByb3AsIHZhbHVlKXtcbiAgICAgICAgLy8gZ2V0L3NldCBub2RlIHN0eWxlKHMpXG4gICAgICAgIC8vICAgICAgcHJvcDogc3RyaW5nIG9yIG9iamVjdFxuICAgICAgICAvL1xuICAgICAgICB2YXIga2V5LCBjb21wdXRlZDtcbiAgICAgICAgaWYodHlwZW9mIHByb3AgPT09ICdvYmplY3QnKXtcbiAgICAgICAgICAgIC8vIG9iamVjdCBzZXR0ZXJcbiAgICAgICAgICAgIGZvcihrZXkgaW4gcHJvcCl7XG4gICAgICAgICAgICAgICAgaWYocHJvcC5oYXNPd25Qcm9wZXJ0eShrZXkpKXtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUobm9kZSwga2V5LCBwcm9wW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9ZWxzZSBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIC8vIHByb3BlcnR5IHNldHRlclxuICAgICAgICAgICAgaWYodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc0RpbWVuc2lvbltwcm9wXSl7XG4gICAgICAgICAgICAgICAgdmFsdWUgKz0gJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgaWYocHJvcCA9PT0gJ3VzZXJTZWxlY3QnKXtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICEhdmFsdWUgPyAndGV4dCcgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgc3R5bGUobm9kZSwge1xuICAgICAgICAgICAgICAgICAgICB3ZWJraXRUb3VjaENhbGxvdXQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB3ZWJraXRVc2VyU2VsZWN0OiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAga2h0bWxVc2VyU2VsZWN0OiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgbW96VXNlclNlbGVjdDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG1zVXNlclNlbGVjdDogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldHRlciwgaWYgYSBzaW1wbGUgc3R5bGVcbiAgICAgICAgaWYobm9kZS5zdHlsZVtwcm9wXSl7XG4gICAgICAgICAgICBpZihpc0RpbWVuc2lvbltwcm9wXSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KG5vZGUuc3R5bGVbcHJvcF0sIDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGlzRmxvYXRbcHJvcF0pe1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG5vZGUuc3R5bGVbcHJvcF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3R5bGVbcHJvcF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBnZXR0ZXIsIGNvbXB1dGVkXG4gICAgICAgIGNvbXB1dGVkID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBwcm9wKTtcbiAgICAgICAgaWYoY29tcHV0ZWRbcHJvcF0pe1xuICAgICAgICAgICAgaWYoL1xcZC8udGVzdChjb21wdXRlZFtwcm9wXSkpe1xuICAgICAgICAgICAgICAgIGlmKCFpc05hTihwYXJzZUludChjb21wdXRlZFtwcm9wXSwgMTApKSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChjb21wdXRlZFtwcm9wXSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcHV0ZWRbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZWRbcHJvcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dHIgKG5vZGUsIHByb3AsIHZhbHVlKXtcbiAgICAgICAgLy8gZ2V0L3NldCBub2RlIGF0dHJpYnV0ZShzKVxuICAgICAgICAvLyAgICAgIHByb3A6IHN0cmluZyBvciBvYmplY3RcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgaWYodHlwZW9mIHByb3AgPT09ICdvYmplY3QnKXtcbiAgICAgICAgICAgIGZvcihrZXkgaW4gcHJvcCl7XG4gICAgICAgICAgICAgICAgaWYocHJvcC5oYXNPd25Qcm9wZXJ0eShrZXkpKXtcbiAgICAgICAgICAgICAgICAgICAgYXR0cihub2RlLCBrZXksIHByb3Bba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIGlmKHByb3AgPT09ICd0ZXh0JyB8fCBwcm9wID09PSAnaHRtbCcgfHwgcHJvcCA9PT0gJ2lubmVySFRNTCcpe1xuICAgICAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUocHJvcCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYm94IChub2RlKXtcbiAgICAgICAgaWYobm9kZSA9PT0gd2luZG93KXtcbiAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm9kZSBkaW1lbnNpb25zXG4gICAgICAgIC8vIHJldHVybmVkIG9iamVjdCBpcyBpbW11dGFibGVcbiAgICAgICAgLy8gYWRkIHNjcm9sbCBwb3NpdGlvbmluZyBhbmQgY29udmVuaWVuY2UgYWJicmV2aWF0aW9uc1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGRpbWVuc2lvbnMgPSBnZXROb2RlKG5vZGUpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9wOiBkaW1lbnNpb25zLnRvcCxcbiAgICAgICAgICAgIHJpZ2h0OiBkaW1lbnNpb25zLnJpZ2h0LFxuICAgICAgICAgICAgYm90dG9tOiBkaW1lbnNpb25zLmJvdHRvbSxcbiAgICAgICAgICAgIGxlZnQ6IGRpbWVuc2lvbnMubGVmdCxcbiAgICAgICAgICAgIGhlaWdodDogZGltZW5zaW9ucy5oZWlnaHQsXG4gICAgICAgICAgICBoOiBkaW1lbnNpb25zLmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiBkaW1lbnNpb25zLndpZHRoLFxuICAgICAgICAgICAgdzogZGltZW5zaW9ucy53aWR0aCxcbiAgICAgICAgICAgIHNjcm9sbFk6IHdpbmRvdy5zY3JvbGxZLFxuICAgICAgICAgICAgc2Nyb2xsWDogd2luZG93LnNjcm9sbFgsXG4gICAgICAgICAgICB4OiBkaW1lbnNpb25zLmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgICAgICB5OiBkaW1lbnNpb25zLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHF1ZXJ5IChub2RlLCBzZWxlY3Rvcil7XG4gICAgICAgIGlmKCFzZWxlY3Rvcil7XG4gICAgICAgICAgICBzZWxlY3RvciA9IG5vZGU7XG4gICAgICAgICAgICBub2RlID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGUucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHF1ZXJ5QWxsIChub2RlLCBzZWxlY3Rvcil7XG4gICAgICAgIGlmKCFzZWxlY3Rvcil7XG4gICAgICAgICAgICBzZWxlY3RvciA9IG5vZGU7XG4gICAgICAgICAgICBub2RlID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vZGVzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblxuICAgICAgICBpZighbm9kZXMubGVuZ3RoKXsgcmV0dXJuIFtdOyB9XG5cbiAgICAgICAgLy8gY29udmVydCB0byBBcnJheSBhbmQgcmV0dXJuIGl0XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2Rlcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9Eb20gKGh0bWwsIG9wdGlvbnMsIHBhcmVudCl7XG4gICAgICAgIC8vIGNyZWF0ZSBhIG5vZGUgZnJvbSBhbiBIVE1MIHN0cmluZ1xuICAgICAgICB2YXIgbm9kZSA9IGRvbSgnZGl2Jywge2h0bWw6IGh0bWx9KTtcbiAgICAgICAgcGFyZW50ID0gYnlJZChwYXJlbnQgfHwgb3B0aW9ucyk7XG4gICAgICAgIGlmKHBhcmVudCl7XG4gICAgICAgICAgICB3aGlsZShub2RlLmZpcnN0Q2hpbGQpe1xuICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICBpZihodG1sLmluZGV4T2YoJzwnKSAhPT0gMCl7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZS5maXJzdENoaWxkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZyb21Eb20gKG5vZGUpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0QXR0cnMgKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBhdHQsIGksIGF0dHJzID0ge307XG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGF0dCA9IG5vZGUuYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgICAgICBhdHRyc1thdHQubG9jYWxOYW1lXSA9IG5vcm1hbGl6ZShhdHQudmFsdWUgPT09ICcnID8gdHJ1ZSA6IGF0dC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXR0cnM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGV4dCAobm9kZSkge1xuICAgICAgICAgICAgdmFyIGksIHQsIHRleHQgPSAnJztcbiAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgdCA9IG5vZGUuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICBpZih0Lm5vZGVUeXBlID09PSAzICYmIHQudGV4dENvbnRlbnQudHJpbSgpKXtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0LnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaSwgb2JqZWN0ID0gZ2V0QXR0cnMobm9kZSk7XG4gICAgICAgIG9iamVjdC50ZXh0ID0gZ2V0VGV4dChub2RlKTtcbiAgICAgICAgb2JqZWN0LmNoaWxkcmVuID0gW107XG4gICAgICAgIGlmKG5vZGUuY2hpbGRyZW4ubGVuZ3RoKXtcbiAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIG9iamVjdC5jaGlsZHJlbi5wdXNoKGZyb21Eb20obm9kZS5jaGlsZHJlbltpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkQ2hpbGRyZW4gKG5vZGUsIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKXtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkQ29udGVudCAobm9kZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgaHRtbDtcbiAgICAgICAgaWYob3B0aW9ucy5odG1sICE9PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5pbm5lckhUTUwgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBodG1sID0gb3B0aW9ucy5odG1sIHx8IG9wdGlvbnMuaW5uZXJIVE1MIHx8ICcnO1xuICAgICAgICAgICAgaWYodHlwZW9mIGh0bWwgPT09ICdvYmplY3QnKXtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZHJlbihub2RlLCBodG1sKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbWlzc2VzIHNvbWUgSFRNTCwgc3VjaCBhcyBlbnRpdGllcyAoJm5wc3A7KVxuICAgICAgICAgICAgLy9lbHNlIGlmKGh0bWwuaW5kZXhPZignPCcpID09PSAwKSB7XG4gICAgICAgICAgICAvLyAgICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICAvL31cbiAgICAgICAgICAgIC8vZWxzZXtcbiAgICAgICAgICAgIC8vICAgIG5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaHRtbCkpO1xuICAgICAgICAgICAgLy99XG4gICAgICAgIH1cbiAgICAgICAgaWYob3B0aW9ucy50ZXh0KXtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob3B0aW9ucy50ZXh0KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYob3B0aW9ucy5jaGlsZHJlbil7XG4gICAgICAgICAgICBhZGRDaGlsZHJlbihub2RlLCBvcHRpb25zLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBkb20gKG5vZGVUeXBlLCBvcHRpb25zLCBwYXJlbnQsIHByZXBlbmQpe1xuICAgICAgICAvLyBjcmVhdGUgYSBub2RlXG4gICAgICAgIC8vIGlmIGZpcnN0IGFyZ3VtZW50IGlzIGEgc3RyaW5nIGFuZCBzdGFydHMgd2l0aCA8LCBpdCBpcyBhc3N1bWVkXG4gICAgICAgIC8vIHRvIHVzZSB0b0RvbSwgYW5kIGNyZWF0ZXMgYSBub2RlIGZyb20gSFRNTC4gT3B0aW9uYWwgc2Vjb25kIGFyZyBpc1xuICAgICAgICAvLyBwYXJlbnQgdG8gYXBwZW5kIHRvXG4gICAgICAgIC8vIGVsc2U6XG4gICAgICAgIC8vICAgICAgbm9kZVR5cGU6IHN0cmluZywgdHlwZSBvZiBub2RlIHRvIGNyZWF0ZVxuICAgICAgICAvLyAgICAgIG9wdGlvbnM6IG9iamVjdCB3aXRoIHN0eWxlLCBjbGFzc05hbWUsIG9yIGF0dHIgcHJvcGVydGllc1xuICAgICAgICAvLyAgICAgICAgICAoY2FuIGFsc28gYmUgb2JqZWN0cylcbiAgICAgICAgLy8gICAgICBwYXJlbnQ6IE5vZGUsIG9wdGlvbmFsIG5vZGUgdG8gYXBwZW5kIHRvXG4gICAgICAgIC8vICAgICAgcHJlcGVuZDogdHJ1dGh5LCB0byBhcHBlbmQgbm9kZSBhcyB0aGUgZmlyc3QgY2hpbGRcbiAgICAgICAgLy9cbiAgICAgICAgaWYobm9kZVR5cGUuaW5kZXhPZignPCcpID09PSAwKXtcbiAgICAgICAgICAgIHJldHVybiB0b0RvbShub2RlVHlwZSwgb3B0aW9ucywgcGFyZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IG9wdGlvbnMuY3NzIHx8IG9wdGlvbnMuY2xhc3NOYW1lIHx8IG9wdGlvbnMuY2xhc3MsXG4gICAgICAgICAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlVHlwZSk7XG5cbiAgICAgICAgcGFyZW50ID0gZ2V0Tm9kZShwYXJlbnQpO1xuXG4gICAgICAgIGlmKGNsYXNzTmFtZSl7XG4gICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWRkQ29udGVudChub2RlLCBvcHRpb25zKTtcbiAgICAgICAgXG4gICAgICAgIGlmKG9wdGlvbnMuY3NzVGV4dCl7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmNzc1RleHQgPSBvcHRpb25zLmNzc1RleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZihvcHRpb25zLmlkKXtcbiAgICAgICAgICAgIG5vZGUuaWQgPSBvcHRpb25zLmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYob3B0aW9ucy5zdHlsZSl7XG4gICAgICAgICAgICBzdHlsZShub2RlLCBvcHRpb25zLnN0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKG9wdGlvbnMuYXR0cil7XG4gICAgICAgICAgICBhdHRyKG5vZGUsIG9wdGlvbnMuYXR0cik7XG4gICAgICAgIH1cblxuICAgICAgICBpZihwYXJlbnQgJiYgaXNOb2RlKHBhcmVudCkpe1xuICAgICAgICAgICAgaWYocHJlcGVuZCAmJiBwYXJlbnQuaGFzQ2hpbGROb2RlcygpKXtcbiAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHBhcmVudC5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROZXh0U2libGluZyAobm9kZSkge1xuICAgICAgICB2YXIgc2libGluZyA9IG5vZGU7XG4gICAgICAgIHdoaWxlKHNpYmxpbmcpe1xuICAgICAgICAgICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZihzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgPT09IDEpe1xuICAgICAgICAgICAgICAgIHJldHVybiBzaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc2VydEFmdGVyIChyZWZOb2RlLCBub2RlKSB7XG4gICAgICAgIHZhciBzaWJsaW5nID0gZ2V0TmV4dFNpYmxpbmcocmVmTm9kZSk7XG4gICAgICAgIGlmKCFzaWJsaW5nKXtcbiAgICAgICAgICAgIHJlZk5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZWZOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaWJsaW5nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlc3Ryb3kgKG5vZGUpe1xuICAgICAgICAvLyBkZXN0cm95cyBhIG5vZGUgY29tcGxldGVseVxuICAgICAgICAvL1xuICAgICAgICBpZihub2RlKSB7XG4gICAgICAgICAgICBkZXN0cm95ZXIuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICBkZXN0cm95ZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbiAobm9kZSwgZGlzcG9zZSl7XG4gICAgICAgIC8vXHRSZW1vdmVzIGFsbCBjaGlsZCBub2Rlc1xuICAgICAgICAvL1x0XHRkaXNwb3NlOiBkZXN0cm95IGNoaWxkIG5vZGVzXG4gICAgICAgIGlmKGRpc3Bvc2Upe1xuICAgICAgICAgICAgd2hpbGUobm9kZS5jaGlsZHJlbi5sZW5ndGgpe1xuICAgICAgICAgICAgICAgIGRlc3Ryb3kobm9kZS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUobm9kZS5jaGlsZHJlbi5sZW5ndGgpe1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFuY2VzdG9yIChub2RlLCBzZWxlY3Rvcil7XG4gICAgICAgIC8vIFRPRE86IHJlcGxhY2UgdGhpcyB3aXRoICdjbG9zZXN0JyBhbmQgJ21hdGNoZXMnXG4gICAgICAgIC8vIGdldHMgdGhlIGFuY2VzdG9yIG9mIG5vZGUgYmFzZWQgb24gc2VsZWN0b3IgY3JpdGVyaWFcbiAgICAgICAgLy8gdXNlZnVsIGZvciBnZXR0aW5nIHRoZSB0YXJnZXQgbm9kZSB3aGVuIGEgY2hpbGQgbm9kZSBpcyBjbGlja2VkIHVwb25cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVVNBR0VcbiAgICAgICAgLy8gICAgICBvbi5zZWxlY3RvcihjaGlsZE5vZGUsICcuYXBwLmFjdGl2ZScpO1xuICAgICAgICAvLyAgICAgIG9uLnNlbGVjdG9yKGNoaWxkTm9kZSwgJyN0aGluZ2VyJyk7XG4gICAgICAgIC8vICAgICAgb24uc2VsZWN0b3IoY2hpbGROb2RlLCAnZGl2Jyk7XG4gICAgICAgIC8vXHRET0VTIE5PVCBTVVBQT1JUOlxuICAgICAgICAvL1x0XHRjb21iaW5hdGlvbnMgb2YgYWJvdmVcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0ZXN0LFxuICAgICAgICAgICAgcGFyZW50ID0gbm9kZTtcblxuICAgICAgICBpZihzZWxlY3Rvci5pbmRleE9mKCcuJykgPT09IDApe1xuICAgICAgICAgICAgLy8gY2xhc3NOYW1lXG4gICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoJy4nLCAnICcpLnRyaW0oKTtcbiAgICAgICAgICAgIHRlc3QgPSBmdW5jdGlvbihuKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHNlbGVjdG9yLmluZGV4T2YoJyMnKSA9PT0gMCl7XG4gICAgICAgICAgICAvLyBub2RlIGlkXG4gICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoJyMnLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgdGVzdCA9IGZ1bmN0aW9uKG4pe1xuICAgICAgICAgICAgICAgIHJldHVybiBuLmlkID09PSBzZWxlY3RvcjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihzZWxlY3Rvci5pbmRleE9mKCdbJykgPiAtMSl7XG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2F0dHJpYnV0ZSBzZWxlY3RvcnMgYXJlIG5vdCB5ZXQgc3VwcG9ydGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIC8vIGFzc3VtaW5nIG5vZGUgbmFtZVxuICAgICAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgdGVzdCA9IGZ1bmN0aW9uKG4pe1xuICAgICAgICAgICAgICAgIHJldHVybiBuLm5vZGVOYW1lID09PSBzZWxlY3RvcjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZShwYXJlbnQpe1xuICAgICAgICAgICAgaWYocGFyZW50ID09PSBkb2N1bWVudC5ib2R5IHx8IHBhcmVudCA9PT0gZG9jdW1lbnQpeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgICAgICAgIGlmKHRlc3QocGFyZW50KSl7IGJyZWFrOyB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuXG4gICAgZG9tLmNsYXNzTGlzdCA9IHtcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobm9kZSwgbmFtZXMpe1xuICAgICAgICAgICAgdG9BcnJheShuYW1lcykuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBmdW5jdGlvbiAobm9kZSwgbmFtZXMpe1xuICAgICAgICAgICAgdG9BcnJheShuYW1lcykuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQobmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFpbnM6IGZ1bmN0aW9uIChub2RlLCBuYW1lcyl7XG4gICAgICAgICAgICByZXR1cm4gdG9BcnJheShuYW1lcykuZXZlcnkoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMobmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbiAobm9kZSwgbmFtZXMsIHZhbHVlKXtcbiAgICAgICAgICAgIG5hbWVzID0gdG9BcnJheShuYW1lcyk7XG4gICAgICAgICAgICBpZih0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgLy8gdXNlIHN0YW5kYXJkIGZ1bmN0aW9uYWxpdHksIHN1cHBvcnRlZCBieSBJRVxuICAgICAgICAgICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QudG9nZ2xlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElFMTEgZG9lcyBub3Qgc3VwcG9ydCB0aGUgc2Vjb25kIHBhcmFtZXRlciAgXG4gICAgICAgICAgICBlbHNlIGlmKHZhbHVlKXtcbiAgICAgICAgICAgICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdG9BcnJheSAobmFtZXMpe1xuICAgICAgICBpZighbmFtZXMpe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignZG9tLmNsYXNzTGlzdCBzaG91bGQgaW5jbHVkZSBhIG5vZGUgYW5kIGEgY2xhc3NOYW1lJyk7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5hbWVzLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmFtZS50cmltKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICBkb20ucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spe1xuICAgICAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgMCk7XG4gICAgICAgIH07XG4gICAgfWVsc2V7XG4gICAgICAgIGRvbS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYil7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplICh2YWwpe1xuICAgICAgICBpZih2YWwgPT09ICdmYWxzZScpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9ZWxzZSBpZih2YWwgPT09ICd0cnVlJyl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZighaXNOYU4ocGFyc2VGbG9hdCh2YWwpKSl7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgZG9tLm5vcm1hbGl6ZSA9IG5vcm1hbGl6ZTtcbiAgICBkb20uY2xlYW4gPSBjbGVhbjtcbiAgICBkb20ucXVlcnkgPSBxdWVyeTtcbiAgICBkb20ucXVlcnlBbGwgPSBxdWVyeUFsbDtcbiAgICBkb20uYnlJZCA9IGJ5SWQ7XG4gICAgZG9tLmF0dHIgPSBhdHRyO1xuICAgIGRvbS5ib3ggPSBib3g7XG4gICAgZG9tLnN0eWxlID0gc3R5bGU7XG4gICAgZG9tLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgIGRvbS51aWQgPSB1aWQ7XG4gICAgZG9tLmlzTm9kZSA9IGlzTm9kZTtcbiAgICBkb20uYW5jZXN0b3IgPSBhbmNlc3RvcjtcbiAgICBkb20udG9Eb20gPSB0b0RvbTtcbiAgICBkb20uZnJvbURvbSA9IGZyb21Eb207XG4gICAgZG9tLmluc2VydEFmdGVyID0gaW5zZXJ0QWZ0ZXI7XG4gICAgZG9tLmdldE5leHRTaWJsaW5nID0gZ2V0TmV4dFNpYmxpbmc7XG5cbiAgICByZXR1cm4gZG9tO1xufSkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy9kb20vc3JjL2RvbS5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFOQTtBQUFBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFDQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 2 */
/* unknown exports provided */
/* all exports used */
/*!**************************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/key-nav/src/keys.js ***!
  \**************************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n(function (define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! on */ 3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (on) {\n\n        'use strict';\n\n        function keys(listNode, options) {\n\n            options = options || {};\n\n            // TODO options:\n            // search an option?\n            // space select an option?\n            // add aria\n\n            var controller = {\n                setSelected: function setSelected(node) {\n                    highlight(select(node));\n                    on.fire(listNode, 'key-select', { value: selected });\n                },\n                getSelected: function getSelected() {\n                    return selected;\n                },\n                destroy: function destroy() {\n                    select();\n                    highlight();\n                    this.handles.forEach(function (h) {\n                        h.remove();\n                    });\n                    if (observer) {\n                        observer.disconnect();\n                    }\n                }\n            },\n                observer,\n                searchString = '',\n                searchStringTimer,\n                searchStringTime = options.searchTime || 1000,\n\n            // children is a live NodeList, so the reference will update if nodes are added or removed\n            children = listNode.children,\n                selected = select(getSelected(children)),\n                highlighted = highlight(selected),\n                nodeType = highlighted.localName;\n\n            function highlight(node) {\n                if (highlighted) {\n                    highlighted.removeAttribute('highlighted');\n                }\n                if (node) {\n                    highlighted = node;\n                    highlighted.setAttribute('highlighted', 'true');\n                }\n                return highlighted;\n            }\n\n            function select(node) {\n                if (selected) {\n                    selected.removeAttribute('selected');\n                }\n                if (node) {\n                    selected = node;\n                    selected.setAttribute('selected', 'true');\n                }\n                return selected;\n            }\n\n            on.fire(listNode, 'key-highlight', { value: highlighted });\n            on.fire(listNode, 'key-select', { value: highlighted });\n\n            controller.handles = [on(listNode, 'mouseover', nodeType, function (e, node) {\n                highlight(node);\n                on.fire(listNode, 'key-highlight', { value: highlighted });\n            }), on(listNode, 'mouseout', function (e) {\n                highlight(null);\n                on.fire(listNode, 'key-highlight', { value: null });\n            }), on(listNode, 'blur', function (e) {\n                highlight(null);\n                on.fire(listNode, 'key-highlight', { value: null });\n            }), on(listNode, 'click', nodeType, function (e, node) {\n                highlight(node);\n                select(node);\n                on.fire(listNode, 'key-select', { value: selected });\n            }), on(listNode, 'keydown', function (e) {\n                if (e.defaultPrevented) {\n                    return;\n                }\n\n                switch (e.key) {\n                    case 'Enter':\n                        select(highlighted);\n                        on.fire(listNode, 'key-select', { value: selected });\n                        break;\n                    case 'Escape':\n                        // consult options?\n                        console.log('esc');\n                        break;\n                    case 'ArrowRight':\n                    case 'ArrowDown':\n                        highlight(getNode(children, highlighted || selected, 'down'));\n                        on.fire(listNode, 'key-highlight', { value: highlighted });\n                        break;\n                    case 'ArrowLeft':\n                    case 'ArrowUp':\n                        highlight(getNode(children, highlighted || selected, 'up'));\n                        on.fire(listNode, 'key-highlight', { value: highlighted });\n                        break;\n                    default:\n                        // the event is not handled\n                        if (on.isAlphaNumeric(e.key)) {\n                            searchString += e.key;\n                            var searchNode = searchHtmlContent(children, searchString);\n                            if (searchNode) {\n                                highlight(select(searchNode));\n                            }\n                            break;\n                        }\n                        return;\n                }\n\n                clearTimeout(searchStringTimer);\n                searchStringTimer = setTimeout(function () {\n                    searchString = '';\n                }, searchStringTime);\n                e.preventDefault();\n                return false;\n            })];\n\n            if (options.roles) {\n                addRoles(listNode);\n                if (typeof MutationObserver !== 'undefined') {\n                    observer = new MutationObserver(function (mutations) {\n                        mutations.forEach(function (event) {\n                            if (event.addedNodes.length) {\n                                addRoles(listNode);\n                            }\n                        });\n                    });\n                    observer.observe(listNode, { childList: true });\n                }\n            }\n\n            return controller;\n        }\n\n        function isSelected(node) {\n            if (!node) {\n                return false;\n            }\n            return node.selected || node.getAttribute('selected');\n        }\n\n        function getSelected(children) {\n            for (var i = 0; i < children.length; i++) {\n                if (isSelected(children[i])) {\n                    return children[i];\n                }\n            }\n            return children[0];\n        }\n\n        function getNext(children, index) {\n            var norecurse = children.length + 2,\n                node = children[index];\n            while (node) {\n                index++;\n                if (index > children.length - 1) {\n                    index = -1;\n                } else if (children[index] && !children[index].parentNode.disabled) {\n                    node = children[index];\n                    break;\n                }\n                if (norecurse-- < 0) {\n                    console.log('RECURSE');\n                    break;\n                }\n            }\n            return node;\n        }\n\n        function getPrev(children, index) {\n            var norecurse = children.length + 2,\n                node = children[index];\n            while (node) {\n                index--;\n                if (index < 0) {\n                    index = children.length;\n                } else if (children[index] && !children[index].parentNode.disabled) {\n                    node = children[index];\n                    break;\n                }\n                if (norecurse-- < 0) {\n                    console.log('RECURSE');\n                    break;\n                }\n            }\n            return node;\n        }\n\n        function getNode(children, highlighted, dir) {\n            var i;\n            for (i = 0; i < children.length; i++) {\n                if (children[i] === highlighted) {\n                    break;\n                }\n            }\n            if (dir === 'down') {\n                return getNext(children, i);\n            } else if (dir === 'up') {\n                return getPrev(children, i);\n            }\n        }\n\n        function searchHtmlContent(children, str) {\n            for (var i = 0; i < children.length; i++) {\n                if (children[i].innerHTML.indexOf(str) === 0) {\n                    return children[i];\n                }\n            }\n            return null;\n        }\n\n        function addRoles(node) {\n            // https://www.w3.org/TR/wai-aria/roles#listbox\n            for (var i = 0; i < node.children.length; i++) {\n                node.children[i].setAttribute('role', 'listitem');\n            }\n            node.setAttribute('role', 'listbox');\n        }\n\n        if (typeof customLoader === 'function') {\n            customLoader(keys, 'keys');\n        } else if (true) {\n            return keys;\n        } else if (typeof module !== 'undefined') {\n            module.exports = keys;\n        } else if (typeof window !== 'undefined') {\n            window.keys = keys;\n        }\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(__webpack_require__(/*! !webpack amd define */ 5));\n\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMva2V5LW5hdi9zcmMva2V5cy5qcz9jMzRlIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZGVmaW5lKSB7XG4gICAgZGVmaW5lKFsnb24nXSwgZnVuY3Rpb24gKG9uKSB7XG4gICAgICAgIFxuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgZnVuY3Rpb24ga2V5cyAobGlzdE5vZGUsIG9wdGlvbnMpIHtcblxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgICAgIC8vIFRPRE8gb3B0aW9uczpcbiAgICAgICAgICAgIC8vIHNlYXJjaCBhbiBvcHRpb24/XG4gICAgICAgICAgICAvLyBzcGFjZSBzZWxlY3QgYW4gb3B0aW9uP1xuICAgICAgICAgICAgLy8gYWRkIGFyaWFcblxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQoc2VsZWN0KG5vZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uLmZpcmUobGlzdE5vZGUsICdrZXktc2VsZWN0Jywge3ZhbHVlOiBzZWxlY3RlZH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnZXRTZWxlY3RlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVzLmZvckVhY2goZnVuY3Rpb24gKGgpIHsgaC5yZW1vdmUoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYnNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nID0gJycsXG4gICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nVGltZXIsXG4gICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nVGltZSA9IG9wdGlvbnMuc2VhcmNoVGltZSB8fCAxMDAwLFxuICAgICAgICAgICAgICAgIC8vIGNoaWxkcmVuIGlzIGEgbGl2ZSBOb2RlTGlzdCwgc28gdGhlIHJlZmVyZW5jZSB3aWxsIHVwZGF0ZSBpZiBub2RlcyBhcmUgYWRkZWQgb3IgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gbGlzdE5vZGUuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBzZWxlY3QoZ2V0U2VsZWN0ZWQoY2hpbGRyZW4pKSxcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZCA9IGhpZ2hsaWdodChzZWxlY3RlZCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGUgPSBoaWdobGlnaHRlZC5sb2NhbE5hbWU7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodCAobm9kZSkge1xuICAgICAgICAgICAgICAgIGlmKGhpZ2hsaWdodGVkKXtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWQucmVtb3ZlQXR0cmlidXRlKCdoaWdobGlnaHRlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWQuc2V0QXR0cmlidXRlKCdoaWdobGlnaHRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBoaWdobGlnaHRlZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VsZWN0IChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYoc2VsZWN0ZWQpe1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvbi5maXJlKGxpc3ROb2RlLCAna2V5LWhpZ2hsaWdodCcsIHt2YWx1ZTogaGlnaGxpZ2h0ZWR9KTtcbiAgICAgICAgICAgIG9uLmZpcmUobGlzdE5vZGUsICdrZXktc2VsZWN0Jywge3ZhbHVlOiBoaWdobGlnaHRlZH0pO1xuXG4gICAgICAgICAgICBjb250cm9sbGVyLmhhbmRsZXMgPSBbXG4gICAgICAgICAgICAgICAgb24obGlzdE5vZGUsICdtb3VzZW92ZXInLCBub2RlVHlwZSwgZnVuY3Rpb24gKGUsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0KG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBvbi5maXJlKGxpc3ROb2RlLCAna2V5LWhpZ2hsaWdodCcsIHt2YWx1ZTogaGlnaGxpZ2h0ZWR9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvbihsaXN0Tm9kZSwgJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0KG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBvbi5maXJlKGxpc3ROb2RlLCAna2V5LWhpZ2hsaWdodCcsIHt2YWx1ZTogbnVsbH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG9uKGxpc3ROb2RlLCAnYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgb24uZmlyZShsaXN0Tm9kZSwgJ2tleS1oaWdobGlnaHQnLCB7dmFsdWU6IG51bGx9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvbihsaXN0Tm9kZSwgJ2NsaWNrJywgbm9kZVR5cGUsIGZ1bmN0aW9uIChlLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0KG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBvbi5maXJlKGxpc3ROb2RlLCAna2V5LXNlbGVjdCcsIHt2YWx1ZTogc2VsZWN0ZWR9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvbihsaXN0Tm9kZSwgJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QoaGlnaGxpZ2h0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uLmZpcmUobGlzdE5vZGUsICdrZXktc2VsZWN0Jywge3ZhbHVlOiBzZWxlY3RlZH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdWx0IG9wdGlvbnM/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VzYycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodChnZXROb2RlKGNoaWxkcmVuLCBoaWdobGlnaHRlZCB8fCBzZWxlY3RlZCwgJ2Rvd24nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24uZmlyZShsaXN0Tm9kZSwgJ2tleS1oaWdobGlnaHQnLCB7dmFsdWU6IGhpZ2hsaWdodGVkfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0KGdldE5vZGUoY2hpbGRyZW4sIGhpZ2hsaWdodGVkIHx8IHNlbGVjdGVkLCAndXAnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24uZmlyZShsaXN0Tm9kZSwgJ2tleS1oaWdobGlnaHQnLCB7dmFsdWU6IGhpZ2hsaWdodGVkfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBldmVudCBpcyBub3QgaGFuZGxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9uLmlzQWxwaGFOdW1lcmljKGUua2V5KSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyArPSBlLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlYXJjaE5vZGUgPSBzZWFyY2hIdG1sQ29udGVudChjaGlsZHJlbiwgc2VhcmNoU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VhcmNoTm9kZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQoc2VsZWN0KHNlYXJjaE5vZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlYXJjaFN0cmluZ1RpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9LCBzZWFyY2hTdHJpbmdUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmKG9wdGlvbnMucm9sZXMpe1xuICAgICAgICAgICAgICAgIGFkZFJvbGVzKGxpc3ROb2RlKTtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC5hZGRlZE5vZGVzLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFJvbGVzKGxpc3ROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobGlzdE5vZGUsIHtjaGlsZExpc3Q6IHRydWV9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZChub2RlKXtcbiAgICAgICAgICAgIGlmKCFub2RlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5zZWxlY3RlZCB8fCBub2RlLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkKGNoaWxkcmVuKXtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoaXNTZWxlY3RlZChjaGlsZHJlbltpXSkpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TmV4dChjaGlsZHJlbiwgaW5kZXgpe1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgICAgbm9yZWN1cnNlID0gY2hpbGRyZW4ubGVuZ3RoICsgMixcbiAgICAgICAgICAgICAgICBub2RlID0gY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgd2hpbGUobm9kZSl7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICBpZihpbmRleCA+IGNoaWxkcmVuLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGNoaWxkcmVuW2luZGV4XSAmJiAhY2hpbGRyZW5baW5kZXhdLnBhcmVudE5vZGUuZGlzYWJsZWQpe1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYobm9yZWN1cnNlLS0gPCAwKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JFQ1VSU0UnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRQcmV2KGNoaWxkcmVuLCBpbmRleCl7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBub3JlY3Vyc2UgPSBjaGlsZHJlbi5sZW5ndGggKyAyLFxuICAgICAgICAgICAgICAgIG5vZGUgPSBjaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICB3aGlsZShub2RlKXtcbiAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgIGlmKGluZGV4IDwgMCl7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGNoaWxkcmVuW2luZGV4XSAmJiAhY2hpbGRyZW5baW5kZXhdLnBhcmVudE5vZGUuZGlzYWJsZWQpe1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYobm9yZWN1cnNlLS0gPCAwKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JFQ1VSU0UnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXROb2RlKGNoaWxkcmVuLCBoaWdobGlnaHRlZCwgZGlyKXtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmKGNoaWxkcmVuW2ldID09PSBoaWdobGlnaHRlZCl7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGRpciA9PT0gJ2Rvd24nKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TmV4dChjaGlsZHJlbiwgaSk7XG4gICAgICAgICAgICB9ZWxzZSBpZihkaXIgPT09ICd1cCcpe1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRQcmV2KGNoaWxkcmVuLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlYXJjaEh0bWxDb250ZW50IChjaGlsZHJlbiwgc3RyKSB7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmKGNoaWxkcmVuW2ldLmlubmVySFRNTC5pbmRleE9mKHN0cikgPT09IDApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRSb2xlcyhub2RlKXtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS9yb2xlcyNsaXN0Ym94XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZHJlbltpXS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdGl0ZW0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpc3Rib3gnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY3VzdG9tTG9hZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjdXN0b21Mb2FkZXIoa2V5cywgJ2tleXMnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCl7XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBrZXlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB3aW5kb3cua2V5cyA9IGtleXM7XG4gICAgICAgIH1cbiAgICB9KTtcbn0oXG4gICAgdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUgOiBmdW5jdGlvbiAoaWRzLCBmYWN0b3J5KSB7XG4gICAgICAgIHZhciBkZXBzID0gaWRzLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHR5cGVvZiByZXF1aXJlID09ICdmdW5jdGlvbicgPyByZXF1aXJlKGlkKSA6IHdpbmRvd1tpZF07IH0pO1xuICAgICAgICB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeS5hcHBseShudWxsLCBkZXBzKSA6IGZhY3RvcnkuYXBwbHkobnVsbCwgZGVwcyk7XG4gICAgfVxuKSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy9rZXktbmF2L3NyYy9rZXlzLmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFxQkE7QUFDQTtBQXZCQTtBQUFBO0FBQUE7QUFDQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdCQTtBQUNBO0FBK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 3 */
/* unknown exports provided */
/* all exports used */
/*!********************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/on/dist/on.js ***!
  \********************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_LOCAL_MODULE_0__;var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* global define, KeyboardEvent, module */\n\n(function () {\n\n\tvar keyboardeventKeyPolyfill = {\n\t\tpolyfill: polyfill,\n\t\tkeys: {\n\t\t\t3: 'Cancel',\n\t\t\t6: 'Help',\n\t\t\t8: 'Backspace',\n\t\t\t9: 'Tab',\n\t\t\t12: 'Clear',\n\t\t\t13: 'Enter',\n\t\t\t16: 'Shift',\n\t\t\t17: 'Control',\n\t\t\t18: 'Alt',\n\t\t\t19: 'Pause',\n\t\t\t20: 'CapsLock',\n\t\t\t27: 'Escape',\n\t\t\t28: 'Convert',\n\t\t\t29: 'NonConvert',\n\t\t\t30: 'Accept',\n\t\t\t31: 'ModeChange',\n\t\t\t32: ' ',\n\t\t\t33: 'PageUp',\n\t\t\t34: 'PageDown',\n\t\t\t35: 'End',\n\t\t\t36: 'Home',\n\t\t\t37: 'ArrowLeft',\n\t\t\t38: 'ArrowUp',\n\t\t\t39: 'ArrowRight',\n\t\t\t40: 'ArrowDown',\n\t\t\t41: 'Select',\n\t\t\t42: 'Print',\n\t\t\t43: 'Execute',\n\t\t\t44: 'PrintScreen',\n\t\t\t45: 'Insert',\n\t\t\t46: 'Delete',\n\t\t\t48: ['0', ')'],\n\t\t\t49: ['1', '!'],\n\t\t\t50: ['2', '@'],\n\t\t\t51: ['3', '#'],\n\t\t\t52: ['4', '$'],\n\t\t\t53: ['5', '%'],\n\t\t\t54: ['6', '^'],\n\t\t\t55: ['7', '&'],\n\t\t\t56: ['8', '*'],\n\t\t\t57: ['9', '('],\n\t\t\t91: 'OS',\n\t\t\t93: 'ContextMenu',\n\t\t\t144: 'NumLock',\n\t\t\t145: 'ScrollLock',\n\t\t\t181: 'VolumeMute',\n\t\t\t182: 'VolumeDown',\n\t\t\t183: 'VolumeUp',\n\t\t\t186: [';', ':'],\n\t\t\t187: ['=', '+'],\n\t\t\t188: [',', '<'],\n\t\t\t189: ['-', '_'],\n\t\t\t190: ['.', '>'],\n\t\t\t191: ['/', '?'],\n\t\t\t192: ['`', '~'],\n\t\t\t219: ['[', '{'],\n\t\t\t220: ['\\\\', '|'],\n\t\t\t221: [']', '}'],\n\t\t\t222: [\"'\", '\"'],\n\t\t\t224: 'Meta',\n\t\t\t225: 'AltGraph',\n\t\t\t246: 'Attn',\n\t\t\t247: 'CrSel',\n\t\t\t248: 'ExSel',\n\t\t\t249: 'EraseEof',\n\t\t\t250: 'Play',\n\t\t\t251: 'ZoomOut'\n\t\t}\n\t};\n\n\t// Function keys (F1-24).\n\tvar i;\n\tfor (i = 1; i < 25; i++) {\n\t\tkeyboardeventKeyPolyfill.keys[111 + i] = 'F' + i;\n\t}\n\n\t// Printable ASCII characters.\n\tvar letter = '';\n\tfor (i = 65; i < 91; i++) {\n\t\tletter = String.fromCharCode(i);\n\t\tkeyboardeventKeyPolyfill.keys[i] = [letter.toLowerCase(), letter.toUpperCase()];\n\t}\n\n\tfunction polyfill() {\n\t\tif (!('KeyboardEvent' in window) || 'key' in KeyboardEvent.prototype) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Polyfill `key` on `KeyboardEvent`.\n\t\tvar proto = {\n\t\t\tget: function get(x) {\n\t\t\t\tvar key = keyboardeventKeyPolyfill.keys[this.which || this.keyCode];\n\n\t\t\t\tif (Array.isArray(key)) {\n\t\t\t\t\tkey = key[+this.shiftKey];\n\t\t\t\t}\n\n\t\t\t\treturn key;\n\t\t\t}\n\t\t};\n\t\tObject.defineProperty(KeyboardEvent.prototype, 'key', proto);\n\t\treturn proto;\n\t}\n\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (keyboardeventKeyPolyfill), __WEBPACK_LOCAL_MODULE_0__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__));\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tmodule.exports = keyboardeventKeyPolyfill;\n\t} else if (window) {\n\t\twindow.keyboardeventKeyPolyfill = keyboardeventKeyPolyfill;\n\t}\n})();\n/* UMD.define */(function (root, factory) {\n\tif (typeof customLoader === 'function') {\n\t\tcustomLoader(factory, 'on');\n\t} else if (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.returnExports = factory();window.on = factory();\n\t}\n})(undefined, function () {\n\t// `on` is a simple library for attaching events to nodes. Its primary feature\n\t// is it returns a handle, from which you can pause, resume and remove the\n\t// event. Handles are much easier to manipulate than using removeEventListener\n\t// and recreating (sometimes complex or recursive) function signatures.\n\t//\n\t// `on` is touch-friendly and will normalize touch events.\n\t//\n\t// `on` also supports a custom `clickoff` event, to detect if you've clicked\n\t// anywhere in the document other than the passed node\n\t//\n\t// USAGE\n\t//      var handle = on(node, 'clickoff', callback);\n\t//      //  callback fires if something other than node is clicked\n\t//\n\t// USAGE\n\t//      var handle = on(node, 'mousedown', onStart);\n\t//      handle.pause();\n\t//      handle.resume();\n\t//      handle.remove();\n\t//\n\t//  `on` also supports multiple event types at once. The following example is\n\t//  useful for handling both desktop mouseovers and tablet clicks:\n\t//\n\t// USAGE\n\t//      var handle = on(node, 'mouseover,click', onStart);\n\t//\n\t// `on` supports selector filters. The targeted element will be in the event\n\t// as filteredTarget\n\t//\n\t// USAGE\n\t//      on(node, 'click', 'div.tab span', callback);\n\t//\n\n\t'use strict';\n\n\t// v1.7.5\n\n\ttry {\n\t\tif (true) {\n\t\t\t__WEBPACK_LOCAL_MODULE_0__;\n\t\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\t\tmodule.require('keyboardevent-key-polyfill');\n\t\t} else {\n\t\t\twindow.keyboardeventKeyPolyfill = keyboardeventKeyPolyfill;\n\t\t}\n\t} catch (e) {\n\t\tconsole.error('on/src/key-poly is required for the event.key property');\n\t}\n\n\tfunction hasWheelTest() {\n\t\tvar isIE = navigator.userAgent.indexOf('Trident') > -1,\n\t\t    div = document.createElement('div');\n\t\treturn \"onwheel\" in div || \"wheel\" in div || isIE && document.implementation.hasFeature(\"Events.wheel\", \"3.0\"); // IE feature detection\n\t}\n\n\tvar INVALID_PROPS,\n\t    matches,\n\t    hasWheel = hasWheelTest(),\n\t    isWin = navigator.userAgent.indexOf('Windows') > -1,\n\t    FACTOR = isWin ? 10 : 0.1,\n\t    XLR8 = 0,\n\t    mouseWheelHandle;\n\n\t['matches', 'matchesSelector', 'webkit', 'moz', 'ms', 'o'].some(function (name) {\n\t\tif (name.length < 7) {\n\t\t\t// prefix\n\t\t\tname += 'MatchesSelector';\n\t\t}\n\t\tif (Element.prototype[name]) {\n\t\t\tmatches = name;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t});\n\n\tfunction closest(element, selector, parent) {\n\t\twhile (element) {\n\t\t\tif (element[matches] && element[matches](selector)) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t\tif (element === parent) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telement = element.parentElement;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction closestFilter(element, selector) {\n\t\treturn function (e) {\n\t\t\treturn closest(e.target, selector, element);\n\t\t};\n\t}\n\n\tfunction makeMultiHandle(handles) {\n\t\treturn {\n\t\t\tremove: function remove() {\n\t\t\t\thandles.forEach(function (h) {\n\t\t\t\t\t// allow for a simple function in the list\n\t\t\t\t\tif (h.remove) {\n\t\t\t\t\t\th.remove();\n\t\t\t\t\t} else if (typeof h === 'function') {\n\t\t\t\t\t\th();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\thandles = [];\n\t\t\t\tthis.remove = this.pause = this.resume = function () {};\n\t\t\t},\n\t\t\tpause: function pause() {\n\t\t\t\thandles.forEach(function (h) {\n\t\t\t\t\tif (h.pause) {\n\t\t\t\t\t\th.pause();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tresume: function resume() {\n\t\t\t\thandles.forEach(function (h) {\n\t\t\t\t\tif (h.resume) {\n\t\t\t\t\t\th.resume();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction onClickoff(node, callback) {\n\t\t// important note!\n\t\t// starts paused\n\t\t//\n\t\tvar handle,\n\t\t    bHandle = on(document.body, 'click', function (event) {\n\t\t\tvar target = event.target;\n\t\t\tif (target.nodeType !== 1) {\n\t\t\t\ttarget = target.parentNode;\n\t\t\t}\n\t\t\tif (target && !node.contains(target)) {\n\t\t\t\tcallback(event);\n\t\t\t}\n\t\t});\n\n\t\thandle = {\n\t\t\tresume: function resume() {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tbHandle.resume();\n\t\t\t\t}, 100);\n\t\t\t},\n\t\t\tpause: function pause() {\n\t\t\t\tbHandle.pause();\n\t\t\t},\n\t\t\tremove: function remove() {\n\t\t\t\tbHandle.remove();\n\t\t\t}\n\t\t};\n\n\t\thandle.pause();\n\n\t\treturn handle;\n\t}\n\n\tfunction onImageLoad(img, callback) {\n\t\tfunction onImageLoad(e) {\n\t\t\tvar h = setInterval(function () {\n\t\t\t\tif (img.naturalWidth) {\n\t\t\t\t\te.width = img.naturalWidth;\n\t\t\t\t\te.naturalWidth = img.naturalWidth;\n\t\t\t\t\te.height = img.naturalHeight;\n\t\t\t\t\te.naturalHeight = img.naturalHeight;\n\t\t\t\t\tcallback(e);\n\t\t\t\t\tclearInterval(h);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\timg.removeEventListener('load', onImageLoad);\n\t\t\timg.removeEventListener('error', callback);\n\t\t}\n\t\timg.addEventListener('load', onImageLoad);\n\t\timg.addEventListener('error', callback);\n\t\treturn {\n\t\t\tpause: function pause() {},\n\t\t\tresume: function resume() {},\n\t\t\tremove: function remove() {\n\t\t\t\timg.removeEventListener('load', onImageLoad);\n\t\t\t\timg.removeEventListener('error', callback);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction getNode(str) {\n\t\tif (typeof str !== 'string') {\n\t\t\treturn str;\n\t\t}\n\t\tvar node;\n\t\tif (/\\#|\\.|\\s/.test(str)) {\n\t\t\tnode = document.body.querySelector(str);\n\t\t} else {\n\t\t\tnode = document.getElementById(str);\n\t\t}\n\t\tif (!node) {\n\t\t\tconsole.error('localLib/on Could not find:', str);\n\t\t}\n\t\treturn node;\n\t}\n\n\tfunction normalizeWheelEvent(callback) {\n\t\t// normalizes all browsers' events to a standard:\n\t\t// delta, wheelY, wheelX\n\t\t// also adds acceleration and deceleration to make\n\t\t// Mac and Windows behave similarly\n\t\treturn function (e) {\n\t\t\tXLR8 += FACTOR;\n\t\t\tvar deltaY = Math.max(-1, Math.min(1, e.wheelDeltaY || e.deltaY)),\n\t\t\t    deltaX = Math.max(-10, Math.min(10, e.wheelDeltaX || e.deltaX));\n\n\t\t\tdeltaY = deltaY <= 0 ? deltaY - XLR8 : deltaY + XLR8;\n\n\t\t\te.delta = deltaY;\n\t\t\te.wheelY = deltaY;\n\t\t\te.wheelX = deltaX;\n\n\t\t\tclearTimeout(mouseWheelHandle);\n\t\t\tmouseWheelHandle = setTimeout(function () {\n\t\t\t\tXLR8 = 0;\n\t\t\t}, 300);\n\t\t\tcallback(e);\n\t\t};\n\t}\n\n\tfunction on(node, eventType, filter, handler) {\n\t\t//  USAGE\n\t\t//      var handle = on(this.node, 'mousedown', this, 'onStart');\n\t\t//      handle.pause();\n\t\t//      handle.resume();\n\t\t//      handle.remove();\n\t\t//\n\t\tvar callback, handles, handle;\n\n\t\tif (/,/.test(eventType)) {\n\t\t\t// handle multiple event types, like:\n\t\t\t// on(node, 'mouseup, mousedown', callback);\n\t\t\t//\n\t\t\thandles = [];\n\t\t\teventType.split(',').forEach(function (eStr) {\n\t\t\t\thandles.push(on(node, eStr.trim(), filter, handler));\n\t\t\t});\n\t\t\treturn makeMultiHandle(handles);\n\t\t}\n\n\t\tnode = getNode(node);\n\n\t\tif (filter && handler) {\n\t\t\tif (typeof filter == 'string') {\n\t\t\t\tfilter = closestFilter(node, filter);\n\t\t\t}\n\t\t\t// else it is a custom function\n\t\t\tcallback = function callback(e) {\n\t\t\t\tvar result = filter(e);\n\t\t\t\tif (result) {\n\t\t\t\t\te.filteredTarget = result;\n\t\t\t\t\thandler(e, result);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tcallback = filter || handler;\n\t\t}\n\n\t\tif (eventType === 'clickoff') {\n\t\t\t// custom - used for popups 'n stuff\n\t\t\treturn onClickoff(node, callback);\n\t\t}\n\n\t\tif (eventType === 'load' && node.localName === 'img') {\n\t\t\treturn onImageLoad(node, callback);\n\t\t}\n\n\t\tif (eventType === 'wheel') {\n\t\t\t// mousewheel events, natch\n\t\t\tif (hasWheel) {\n\t\t\t\t// pass through, but first curry callback to wheel events\n\t\t\t\tcallback = normalizeWheelEvent(callback);\n\t\t\t} else {\n\t\t\t\t// old Firefox, old IE, Chrome\n\t\t\t\treturn makeMultiHandle([on(node, 'DOMMouseScroll', normalizeWheelEvent(callback)), on(node, 'mousewheel', normalizeWheelEvent(callback))]);\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener(eventType, callback, false);\n\n\t\thandle = {\n\t\t\tremove: function remove() {\n\t\t\t\tnode.removeEventListener(eventType, callback, false);\n\t\t\t\tnode = callback = null;\n\t\t\t\tthis.remove = this.pause = this.resume = function () {};\n\t\t\t},\n\t\t\tpause: function pause() {\n\t\t\t\tnode.removeEventListener(eventType, callback, false);\n\t\t\t},\n\t\t\tresume: function resume() {\n\t\t\t\tnode.addEventListener(eventType, callback, false);\n\t\t\t}\n\t\t};\n\n\t\treturn handle;\n\t}\n\n\ton.once = function (node, eventType, filter, callback) {\n\t\tvar h;\n\t\tif (filter && callback) {\n\t\t\th = on(node, eventType, filter, function () {\n\t\t\t\tcallback.apply(window, arguments);\n\t\t\t\th.remove();\n\t\t\t});\n\t\t} else {\n\t\t\th = on(node, eventType, function () {\n\t\t\t\tfilter.apply(window, arguments);\n\t\t\t\th.remove();\n\t\t\t});\n\t\t}\n\t\treturn h;\n\t};\n\n\tINVALID_PROPS = {\n\t\tisTrusted: 1\n\t};\n\tfunction mix(object, value) {\n\t\tif (!value) {\n\t\t\treturn object;\n\t\t}\n\t\tif ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n\t\t\tObject.keys(value).forEach(function (key) {\n\t\t\t\tif (!INVALID_PROPS[key]) {\n\t\t\t\t\tobject[key] = value[key];\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tobject.value = value;\n\t\t}\n\t\treturn object;\n\t}\n\n\ton.emit = function (node, eventName, value) {\n\t\tnode = getNode(node);\n\t\tvar event = document.createEvent('HTMLEvents');\n\t\tevent.initEvent(eventName, true, true); // event type, bubbling, cancelable\n\t\treturn node.dispatchEvent(mix(event, value));\n\t};\n\n\ton.fire = function (node, eventName, eventDetail, bubbles) {\n\t\tvar event = document.createEvent('CustomEvent');\n\t\tevent.initCustomEvent(eventName, !!bubbles, true, eventDetail); // event type, bubbling, cancelable\n\t\treturn node.dispatchEvent(event);\n\t};\n\n\ton.isAlphaNumeric = function (str) {\n\t\tif (str.length > 1) {\n\t\t\treturn false;\n\t\t}\n\t\tif (str === ' ') {\n\t\t\treturn false;\n\t\t}\n\t\tif (!isNaN(Number(str))) {\n\t\t\treturn true;\n\t\t}\n\t\tvar code = str.toLowerCase().charCodeAt(0);\n\t\treturn code >= 97 && code <= 122;\n\t};\n\n\ton.makeMultiHandle = makeMultiHandle;\n\ton.closest = closest;\n\ton.matches = matches;\n\n\treturn on;\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvb24vZGlzdC9vbi5qcz83YzJmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBkZWZpbmUsIEtleWJvYXJkRXZlbnQsIG1vZHVsZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gIHZhciBrZXlib2FyZGV2ZW50S2V5UG9seWZpbGwgPSB7XG4gICAgcG9seWZpbGw6IHBvbHlmaWxsLFxuICAgIGtleXM6IHtcbiAgICAgIDM6ICdDYW5jZWwnLFxuICAgICAgNjogJ0hlbHAnLFxuICAgICAgODogJ0JhY2tzcGFjZScsXG4gICAgICA5OiAnVGFiJyxcbiAgICAgIDEyOiAnQ2xlYXInLFxuICAgICAgMTM6ICdFbnRlcicsXG4gICAgICAxNjogJ1NoaWZ0JyxcbiAgICAgIDE3OiAnQ29udHJvbCcsXG4gICAgICAxODogJ0FsdCcsXG4gICAgICAxOTogJ1BhdXNlJyxcbiAgICAgIDIwOiAnQ2Fwc0xvY2snLFxuICAgICAgMjc6ICdFc2NhcGUnLFxuICAgICAgMjg6ICdDb252ZXJ0JyxcbiAgICAgIDI5OiAnTm9uQ29udmVydCcsXG4gICAgICAzMDogJ0FjY2VwdCcsXG4gICAgICAzMTogJ01vZGVDaGFuZ2UnLFxuICAgICAgMzI6ICcgJyxcbiAgICAgIDMzOiAnUGFnZVVwJyxcbiAgICAgIDM0OiAnUGFnZURvd24nLFxuICAgICAgMzU6ICdFbmQnLFxuICAgICAgMzY6ICdIb21lJyxcbiAgICAgIDM3OiAnQXJyb3dMZWZ0JyxcbiAgICAgIDM4OiAnQXJyb3dVcCcsXG4gICAgICAzOTogJ0Fycm93UmlnaHQnLFxuICAgICAgNDA6ICdBcnJvd0Rvd24nLFxuICAgICAgNDE6ICdTZWxlY3QnLFxuICAgICAgNDI6ICdQcmludCcsXG4gICAgICA0MzogJ0V4ZWN1dGUnLFxuICAgICAgNDQ6ICdQcmludFNjcmVlbicsXG4gICAgICA0NTogJ0luc2VydCcsXG4gICAgICA0NjogJ0RlbGV0ZScsXG4gICAgICA0ODogWycwJywgJyknXSxcbiAgICAgIDQ5OiBbJzEnLCAnISddLFxuICAgICAgNTA6IFsnMicsICdAJ10sXG4gICAgICA1MTogWyczJywgJyMnXSxcbiAgICAgIDUyOiBbJzQnLCAnJCddLFxuICAgICAgNTM6IFsnNScsICclJ10sXG4gICAgICA1NDogWyc2JywgJ14nXSxcbiAgICAgIDU1OiBbJzcnLCAnJiddLFxuICAgICAgNTY6IFsnOCcsICcqJ10sXG4gICAgICA1NzogWyc5JywgJygnXSxcbiAgICAgIDkxOiAnT1MnLFxuICAgICAgOTM6ICdDb250ZXh0TWVudScsXG4gICAgICAxNDQ6ICdOdW1Mb2NrJyxcbiAgICAgIDE0NTogJ1Njcm9sbExvY2snLFxuICAgICAgMTgxOiAnVm9sdW1lTXV0ZScsXG4gICAgICAxODI6ICdWb2x1bWVEb3duJyxcbiAgICAgIDE4MzogJ1ZvbHVtZVVwJyxcbiAgICAgIDE4NjogWyc7JywgJzonXSxcbiAgICAgIDE4NzogWyc9JywgJysnXSxcbiAgICAgIDE4ODogWycsJywgJzwnXSxcbiAgICAgIDE4OTogWyctJywgJ18nXSxcbiAgICAgIDE5MDogWycuJywgJz4nXSxcbiAgICAgIDE5MTogWycvJywgJz8nXSxcbiAgICAgIDE5MjogWydgJywgJ34nXSxcbiAgICAgIDIxOTogWydbJywgJ3snXSxcbiAgICAgIDIyMDogWydcXFxcJywgJ3wnXSxcbiAgICAgIDIyMTogWyddJywgJ30nXSxcbiAgICAgIDIyMjogW1wiJ1wiLCAnXCInXSxcbiAgICAgIDIyNDogJ01ldGEnLFxuICAgICAgMjI1OiAnQWx0R3JhcGgnLFxuICAgICAgMjQ2OiAnQXR0bicsXG4gICAgICAyNDc6ICdDclNlbCcsXG4gICAgICAyNDg6ICdFeFNlbCcsXG4gICAgICAyNDk6ICdFcmFzZUVvZicsXG4gICAgICAyNTA6ICdQbGF5JyxcbiAgICAgIDI1MTogJ1pvb21PdXQnXG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIGtleXMgKEYxLTI0KS5cbiAgdmFyIGk7XG4gIGZvciAoaSA9IDE7IGkgPCAyNTsgaSsrKSB7XG4gICAga2V5Ym9hcmRldmVudEtleVBvbHlmaWxsLmtleXNbMTExICsgaV0gPSAnRicgKyBpO1xuICB9XG5cbiAgLy8gUHJpbnRhYmxlIEFTQ0lJIGNoYXJhY3RlcnMuXG4gIHZhciBsZXR0ZXIgPSAnJztcbiAgZm9yIChpID0gNjU7IGkgPCA5MTsgaSsrKSB7XG4gICAgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICBrZXlib2FyZGV2ZW50S2V5UG9seWZpbGwua2V5c1tpXSA9IFtsZXR0ZXIudG9Mb3dlckNhc2UoKSwgbGV0dGVyLnRvVXBwZXJDYXNlKCldO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9seWZpbGwgKCkge1xuICAgIGlmICghKCdLZXlib2FyZEV2ZW50JyBpbiB3aW5kb3cpIHx8XG4gICAgICAgICdrZXknIGluIEtleWJvYXJkRXZlbnQucHJvdG90eXBlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gUG9seWZpbGwgYGtleWAgb24gYEtleWJvYXJkRXZlbnRgLlxuICAgIHZhciBwcm90byA9IHtcbiAgICAgIGdldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleWJvYXJkZXZlbnRLZXlQb2x5ZmlsbC5rZXlzW3RoaXMud2hpY2ggfHwgdGhpcy5rZXlDb2RlXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXkpKSB7XG4gICAgICAgICAga2V5ID0ga2V5Wyt0aGlzLnNoaWZ0S2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2V5Ym9hcmRFdmVudC5wcm90b3R5cGUsICdrZXknLCBwcm90byk7XG4gICAgcmV0dXJuIHByb3RvO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZSgna2V5Ym9hcmRldmVudC1rZXktcG9seWZpbGwnLCBrZXlib2FyZGV2ZW50S2V5UG9seWZpbGwpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ga2V5Ym9hcmRldmVudEtleVBvbHlmaWxsO1xuICB9IGVsc2UgaWYgKHdpbmRvdykge1xuICAgIHdpbmRvdy5rZXlib2FyZGV2ZW50S2V5UG9seWZpbGwgPSBrZXlib2FyZGV2ZW50S2V5UG9seWZpbGw7XG4gIH1cblxufSkoKTtcbi8qIFVNRC5kZWZpbmUgKi8gKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgY3VzdG9tTG9hZGVyID09PSAnZnVuY3Rpb24nKXsgY3VzdG9tTG9hZGVyKGZhY3RvcnksICdvbicpOyB9ZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKXsgZGVmaW5lKFtdLCBmYWN0b3J5KTsgfWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKXsgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7IH1lbHNleyByb290LnJldHVybkV4cG9ydHMgPSBmYWN0b3J5KCk7IHdpbmRvdy5vbiA9IGZhY3RvcnkoKTsgfVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG5cdC8vIGBvbmAgaXMgYSBzaW1wbGUgbGlicmFyeSBmb3IgYXR0YWNoaW5nIGV2ZW50cyB0byBub2Rlcy4gSXRzIHByaW1hcnkgZmVhdHVyZVxuXHQvLyBpcyBpdCByZXR1cm5zIGEgaGFuZGxlLCBmcm9tIHdoaWNoIHlvdSBjYW4gcGF1c2UsIHJlc3VtZSBhbmQgcmVtb3ZlIHRoZVxuXHQvLyBldmVudC4gSGFuZGxlcyBhcmUgbXVjaCBlYXNpZXIgdG8gbWFuaXB1bGF0ZSB0aGFuIHVzaW5nIHJlbW92ZUV2ZW50TGlzdGVuZXJcblx0Ly8gYW5kIHJlY3JlYXRpbmcgKHNvbWV0aW1lcyBjb21wbGV4IG9yIHJlY3Vyc2l2ZSkgZnVuY3Rpb24gc2lnbmF0dXJlcy5cblx0Ly9cblx0Ly8gYG9uYCBpcyB0b3VjaC1mcmllbmRseSBhbmQgd2lsbCBub3JtYWxpemUgdG91Y2ggZXZlbnRzLlxuXHQvL1xuXHQvLyBgb25gIGFsc28gc3VwcG9ydHMgYSBjdXN0b20gYGNsaWNrb2ZmYCBldmVudCwgdG8gZGV0ZWN0IGlmIHlvdSd2ZSBjbGlja2VkXG5cdC8vIGFueXdoZXJlIGluIHRoZSBkb2N1bWVudCBvdGhlciB0aGFuIHRoZSBwYXNzZWQgbm9kZVxuXHQvL1xuXHQvLyBVU0FHRVxuXHQvLyAgICAgIHZhciBoYW5kbGUgPSBvbihub2RlLCAnY2xpY2tvZmYnLCBjYWxsYmFjayk7XG5cdC8vICAgICAgLy8gIGNhbGxiYWNrIGZpcmVzIGlmIHNvbWV0aGluZyBvdGhlciB0aGFuIG5vZGUgaXMgY2xpY2tlZFxuXHQvL1xuXHQvLyBVU0FHRVxuXHQvLyAgICAgIHZhciBoYW5kbGUgPSBvbihub2RlLCAnbW91c2Vkb3duJywgb25TdGFydCk7XG5cdC8vICAgICAgaGFuZGxlLnBhdXNlKCk7XG5cdC8vICAgICAgaGFuZGxlLnJlc3VtZSgpO1xuXHQvLyAgICAgIGhhbmRsZS5yZW1vdmUoKTtcblx0Ly9cblx0Ly8gIGBvbmAgYWxzbyBzdXBwb3J0cyBtdWx0aXBsZSBldmVudCB0eXBlcyBhdCBvbmNlLiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgaXNcblx0Ly8gIHVzZWZ1bCBmb3IgaGFuZGxpbmcgYm90aCBkZXNrdG9wIG1vdXNlb3ZlcnMgYW5kIHRhYmxldCBjbGlja3M6XG5cdC8vXG5cdC8vIFVTQUdFXG5cdC8vICAgICAgdmFyIGhhbmRsZSA9IG9uKG5vZGUsICdtb3VzZW92ZXIsY2xpY2snLCBvblN0YXJ0KTtcblx0Ly9cblx0Ly8gYG9uYCBzdXBwb3J0cyBzZWxlY3RvciBmaWx0ZXJzLiBUaGUgdGFyZ2V0ZWQgZWxlbWVudCB3aWxsIGJlIGluIHRoZSBldmVudFxuXHQvLyBhcyBmaWx0ZXJlZFRhcmdldFxuXHQvL1xuXHQvLyBVU0FHRVxuXHQvLyAgICAgIG9uKG5vZGUsICdjbGljaycsICdkaXYudGFiIHNwYW4nLCBjYWxsYmFjayk7XG5cdC8vXG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vIHYxLjcuNVxuXG5cdHRyeXtcblx0XHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0XHRyZXF1aXJlKCdrZXlib2FyZGV2ZW50LWtleS1wb2x5ZmlsbCcpO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRtb2R1bGUucmVxdWlyZSgna2V5Ym9hcmRldmVudC1rZXktcG9seWZpbGwnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2luZG93LmtleWJvYXJkZXZlbnRLZXlQb2x5ZmlsbCA9IGtleWJvYXJkZXZlbnRLZXlQb2x5ZmlsbDtcblx0XHR9XG5cdH1jYXRjaChlKXtcblx0XHRjb25zb2xlLmVycm9yKCdvbi9zcmMva2V5LXBvbHkgaXMgcmVxdWlyZWQgZm9yIHRoZSBldmVudC5rZXkgcHJvcGVydHknKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGhhc1doZWVsVGVzdCgpe1xuXHRcdHZhclxuXHRcdFx0aXNJRSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpID4gLTEsXG5cdFx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRyZXR1cm4gIFwib253aGVlbFwiIGluIGRpdiB8fCBcIndoZWVsXCIgaW4gZGl2IHx8XG5cdFx0XHQoaXNJRSAmJiBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKFwiRXZlbnRzLndoZWVsXCIsIFwiMy4wXCIpKTsgLy8gSUUgZmVhdHVyZSBkZXRlY3Rpb25cblx0fVxuXG5cdHZhclxuXHRcdElOVkFMSURfUFJPUFMsXG5cdFx0bWF0Y2hlcyxcblx0XHRoYXNXaGVlbCA9IGhhc1doZWVsVGVzdCgpLFxuXHRcdGlzV2luID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdXaW5kb3dzJyk+LTEsXG5cdFx0RkFDVE9SID0gaXNXaW4gPyAxMCA6IDAuMSxcblx0XHRYTFI4ID0gMCxcblx0XHRtb3VzZVdoZWVsSGFuZGxlO1xuXG5cblx0WydtYXRjaGVzJywgJ21hdGNoZXNTZWxlY3RvcicsICd3ZWJraXQnLCAnbW96JywgJ21zJywgJ28nXS5zb21lKGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0aWYgKG5hbWUubGVuZ3RoIDwgNykgeyAvLyBwcmVmaXhcblx0XHRcdG5hbWUgKz0gJ01hdGNoZXNTZWxlY3Rvcic7XG5cdFx0fVxuXHRcdGlmIChFbGVtZW50LnByb3RvdHlwZVtuYW1lXSkge1xuXHRcdFx0bWF0Y2hlcyA9IG5hbWU7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBjbG9zZXN0IChlbGVtZW50LCBzZWxlY3RvciwgcGFyZW50KSB7XG5cdFx0d2hpbGUgKGVsZW1lbnQpIHtcblx0XHRcdGlmIChlbGVtZW50W21hdGNoZXNdICYmIGVsZW1lbnRbbWF0Y2hlc10oc2VsZWN0b3IpKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtZW50O1xuXHRcdFx0fVxuXHRcdFx0aWYgKGVsZW1lbnQgPT09IHBhcmVudCkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xvc2VzdEZpbHRlciAoZWxlbWVudCwgc2VsZWN0b3IpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKGUpIHtcblx0XHRcdHJldHVybiBjbG9zZXN0KGUudGFyZ2V0LCBzZWxlY3RvciwgZWxlbWVudCk7XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1ha2VNdWx0aUhhbmRsZSAoaGFuZGxlcyl7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKXtcblx0XHRcdFx0aGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uKGgpe1xuXHRcdFx0XHRcdC8vIGFsbG93IGZvciBhIHNpbXBsZSBmdW5jdGlvbiBpbiB0aGUgbGlzdFxuXHRcdFx0XHRcdGlmKGgucmVtb3ZlKSB7XG5cdFx0XHRcdFx0XHRoLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH1lbHNlIGlmKHR5cGVvZiBoID09PSAnZnVuY3Rpb24nKXtcblx0XHRcdFx0XHRcdGgoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRoYW5kbGVzID0gW107XG5cdFx0XHRcdHRoaXMucmVtb3ZlID0gdGhpcy5wYXVzZSA9IHRoaXMucmVzdW1lID0gZnVuY3Rpb24oKXt9O1xuXHRcdFx0fSxcblx0XHRcdHBhdXNlOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRoYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oaCl7IGlmKGgucGF1c2UpeyBoLnBhdXNlKCk7IH19KTtcblx0XHRcdH0sXG5cdFx0XHRyZXN1bWU6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGhhbmRsZXMuZm9yRWFjaChmdW5jdGlvbihoKXsgaWYoaC5yZXN1bWUpeyBoLnJlc3VtZSgpOyB9fSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIG9uQ2xpY2tvZmYgKG5vZGUsIGNhbGxiYWNrKXtcblx0XHQvLyBpbXBvcnRhbnQgbm90ZSFcblx0XHQvLyBzdGFydHMgcGF1c2VkXG5cdFx0Ly9cblx0XHR2YXJcblx0XHRcdGhhbmRsZSxcblx0XHRcdGJIYW5kbGUgPSBvbihkb2N1bWVudC5ib2R5LCAnY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cdFx0XHRcdGlmKHRhcmdldC5ub2RlVHlwZSAhPT0gMSl7XG5cdFx0XHRcdFx0dGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYodGFyZ2V0ICYmICFub2RlLmNvbnRhaW5zKHRhcmdldCkpIHtcblx0XHRcdFx0XHRjYWxsYmFjayhldmVudCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0aGFuZGxlID0ge1xuXHRcdFx0cmVzdW1lOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGJIYW5kbGUucmVzdW1lKCk7XG5cdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHR9LFxuXHRcdFx0cGF1c2U6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YkhhbmRsZS5wYXVzZSgpO1xuXHRcdFx0fSxcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRiSGFuZGxlLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRoYW5kbGUucGF1c2UoKTtcblxuXHRcdHJldHVybiBoYW5kbGU7XG5cdH1cblxuXHRmdW5jdGlvbiBvbkltYWdlTG9hZCAoaW1nLCBjYWxsYmFjaykge1xuXHRcdGZ1bmN0aW9uIG9uSW1hZ2VMb2FkIChlKSB7XG5cdFx0XHRcdHZhciBoID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmKGltZy5uYXR1cmFsV2lkdGgpe1xuXHRcdFx0XHRcdFx0ZS53aWR0aCA9IGltZy5uYXR1cmFsV2lkdGg7XG5cdFx0XHRcdFx0XHRlLm5hdHVyYWxXaWR0aCA9IGltZy5uYXR1cmFsV2lkdGg7XG5cdFx0XHRcdFx0XHRlLmhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0O1xuXHRcdFx0XHRcdFx0ZS5uYXR1cmFsSGVpZ2h0ID0gaW1nLm5hdHVyYWxIZWlnaHQ7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayhlKTtcblx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoaCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAxMDApO1xuXHRcdFx0aW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBvbkltYWdlTG9hZCk7XG5cdFx0XHRpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjYWxsYmFjayk7XG5cdFx0fVxuXHRcdGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25JbWFnZUxvYWQpO1xuXHRcdGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGNhbGxiYWNrKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cGF1c2U6IGZ1bmN0aW9uICgpIHt9LFxuXHRcdFx0cmVzdW1lOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uSW1hZ2VMb2FkKTtcblx0XHRcdFx0aW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2FsbGJhY2spO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5vZGUoc3RyKXtcblx0XHRpZih0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyl7XG5cdFx0XHRyZXR1cm4gc3RyO1xuXHRcdH1cblx0XHR2YXIgbm9kZTtcblx0XHRpZigvXFwjfFxcLnxcXHMvLnRlc3Qoc3RyKSl7XG5cdFx0XHRub2RlID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKHN0cik7XG5cdFx0fWVsc2V7XG5cdFx0XHRub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RyKTtcblx0XHR9XG5cdFx0aWYoIW5vZGUpe1xuXHRcdFx0Y29uc29sZS5lcnJvcignbG9jYWxMaWIvb24gQ291bGQgbm90IGZpbmQ6Jywgc3RyKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5vZGU7XG5cdH1cblxuXHRmdW5jdGlvbiBub3JtYWxpemVXaGVlbEV2ZW50IChjYWxsYmFjayl7XG5cdFx0Ly8gbm9ybWFsaXplcyBhbGwgYnJvd3NlcnMnIGV2ZW50cyB0byBhIHN0YW5kYXJkOlxuXHRcdC8vIGRlbHRhLCB3aGVlbFksIHdoZWVsWFxuXHRcdC8vIGFsc28gYWRkcyBhY2NlbGVyYXRpb24gYW5kIGRlY2VsZXJhdGlvbiB0byBtYWtlXG5cdFx0Ly8gTWFjIGFuZCBXaW5kb3dzIGJlaGF2ZSBzaW1pbGFybHlcblx0XHRyZXR1cm4gZnVuY3Rpb24oZSl7XG5cdFx0XHRYTFI4ICs9IEZBQ1RPUjtcblx0XHRcdHZhclxuXHRcdFx0XHRkZWx0YVkgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgKGUud2hlZWxEZWx0YVkgfHwgZS5kZWx0YVkpKSksXG5cdFx0XHRcdGRlbHRhWCA9IE1hdGgubWF4KC0xMCwgTWF0aC5taW4oMTAsIChlLndoZWVsRGVsdGFYIHx8IGUuZGVsdGFYKSkpO1xuXG5cdFx0XHRkZWx0YVkgPSBkZWx0YVkgPD0gMCA/IGRlbHRhWSAtIFhMUjggOiBkZWx0YVkgKyBYTFI4O1xuXG5cdFx0XHRlLmRlbHRhID0gZGVsdGFZO1xuXHRcdFx0ZS53aGVlbFkgPSBkZWx0YVk7XG5cdFx0XHRlLndoZWVsWCA9IGRlbHRhWDtcblxuXHRcdFx0Y2xlYXJUaW1lb3V0KG1vdXNlV2hlZWxIYW5kbGUpO1xuXHRcdFx0bW91c2VXaGVlbEhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0WExSOCA9IDA7XG5cdFx0XHR9LCAzMDApO1xuXHRcdFx0Y2FsbGJhY2soZSk7XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIG9uIChub2RlLCBldmVudFR5cGUsIGZpbHRlciwgaGFuZGxlcil7XG5cdFx0Ly8gIFVTQUdFXG5cdFx0Ly8gICAgICB2YXIgaGFuZGxlID0gb24odGhpcy5ub2RlLCAnbW91c2Vkb3duJywgdGhpcywgJ29uU3RhcnQnKTtcblx0XHQvLyAgICAgIGhhbmRsZS5wYXVzZSgpO1xuXHRcdC8vICAgICAgaGFuZGxlLnJlc3VtZSgpO1xuXHRcdC8vICAgICAgaGFuZGxlLnJlbW92ZSgpO1xuXHRcdC8vXG5cdFx0dmFyXG5cdFx0XHRjYWxsYmFjayxcblx0XHRcdGhhbmRsZXMsXG5cdFx0XHRoYW5kbGU7XG5cblx0XHRpZigvLC8udGVzdChldmVudFR5cGUpKXtcblx0XHRcdC8vIGhhbmRsZSBtdWx0aXBsZSBldmVudCB0eXBlcywgbGlrZTpcblx0XHRcdC8vIG9uKG5vZGUsICdtb3VzZXVwLCBtb3VzZWRvd24nLCBjYWxsYmFjayk7XG5cdFx0XHQvL1xuXHRcdFx0aGFuZGxlcyA9IFtdO1xuXHRcdFx0ZXZlbnRUeXBlLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbihlU3RyKXtcblx0XHRcdFx0aGFuZGxlcy5wdXNoKG9uKG5vZGUsIGVTdHIudHJpbSgpLCBmaWx0ZXIsIGhhbmRsZXIpKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIG1ha2VNdWx0aUhhbmRsZShoYW5kbGVzKTtcblx0XHR9XG5cblx0XHRub2RlID0gZ2V0Tm9kZShub2RlKTtcblxuXHRcdGlmKGZpbHRlciAmJiBoYW5kbGVyKXtcblx0XHRcdGlmICh0eXBlb2YgZmlsdGVyID09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGZpbHRlciA9IGNsb3Nlc3RGaWx0ZXIobm9kZSwgZmlsdGVyKTtcblx0XHRcdH1cblx0XHRcdC8vIGVsc2UgaXQgaXMgYSBjdXN0b20gZnVuY3Rpb25cblx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IGZpbHRlcihlKTtcblx0XHRcdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0XHRcdGUuZmlsdGVyZWRUYXJnZXQgPSByZXN1bHQ7XG5cdFx0XHRcdFx0aGFuZGxlcihlLCByZXN1bHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1lbHNle1xuXHRcdFx0Y2FsbGJhY2sgPSBmaWx0ZXIgfHwgaGFuZGxlcjtcblx0XHR9XG5cblx0XHRpZihldmVudFR5cGUgPT09ICdjbGlja29mZicpe1xuXHRcdFx0Ly8gY3VzdG9tIC0gdXNlZCBmb3IgcG9wdXBzICduIHN0dWZmXG5cdFx0XHRyZXR1cm4gb25DbGlja29mZihub2RlLCBjYWxsYmFjayk7XG5cdFx0fVxuXG5cdFx0aWYgKGV2ZW50VHlwZSA9PT0gJ2xvYWQnICYmIG5vZGUubG9jYWxOYW1lID09PSAnaW1nJyl7XG5cdFx0XHRyZXR1cm4gb25JbWFnZUxvYWQobm9kZSwgY2FsbGJhY2spO1xuXHRcdH1cblxuXHRcdGlmKGV2ZW50VHlwZSA9PT0gJ3doZWVsJyl7XG5cdFx0XHQvLyBtb3VzZXdoZWVsIGV2ZW50cywgbmF0Y2hcblx0XHRcdGlmKGhhc1doZWVsKXtcblx0XHRcdFx0Ly8gcGFzcyB0aHJvdWdoLCBidXQgZmlyc3QgY3VycnkgY2FsbGJhY2sgdG8gd2hlZWwgZXZlbnRzXG5cdFx0XHRcdGNhbGxiYWNrID0gbm9ybWFsaXplV2hlZWxFdmVudChjYWxsYmFjayk7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0Ly8gb2xkIEZpcmVmb3gsIG9sZCBJRSwgQ2hyb21lXG5cdFx0XHRcdHJldHVybiBtYWtlTXVsdGlIYW5kbGUoW1xuXHRcdFx0XHRcdG9uKG5vZGUsICdET01Nb3VzZVNjcm9sbCcsIG5vcm1hbGl6ZVdoZWVsRXZlbnQoY2FsbGJhY2spKSxcblx0XHRcdFx0XHRvbihub2RlLCAnbW91c2V3aGVlbCcsIG5vcm1hbGl6ZVdoZWVsRXZlbnQoY2FsbGJhY2spKVxuXHRcdFx0XHRdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuXG5cdFx0aGFuZGxlID0ge1xuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcblx0XHRcdFx0bm9kZSA9IGNhbGxiYWNrID0gbnVsbDtcblx0XHRcdFx0dGhpcy5yZW1vdmUgPSB0aGlzLnBhdXNlID0gdGhpcy5yZXN1bWUgPSBmdW5jdGlvbigpe307XG5cdFx0XHR9LFxuXHRcdFx0cGF1c2U6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCBmYWxzZSk7XG5cdFx0XHR9LFxuXHRcdFx0cmVzdW1lOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRyZXR1cm4gaGFuZGxlO1xuXHR9XG5cblx0b24ub25jZSA9IGZ1bmN0aW9uIChub2RlLCBldmVudFR5cGUsIGZpbHRlciwgY2FsbGJhY2spe1xuXHRcdHZhciBoO1xuXHRcdGlmKGZpbHRlciAmJiBjYWxsYmFjayl7XG5cdFx0XHRoID0gb24obm9kZSwgZXZlbnRUeXBlLCBmaWx0ZXIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkod2luZG93LCBhcmd1bWVudHMpO1xuXHRcdFx0XHRoLnJlbW92ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fWVsc2V7XG5cdFx0XHRoID0gb24obm9kZSwgZXZlbnRUeXBlLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGZpbHRlci5hcHBseSh3aW5kb3csIGFyZ3VtZW50cyk7XG5cdFx0XHRcdGgucmVtb3ZlKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGg7XG5cdH07XG5cblx0SU5WQUxJRF9QUk9QUyA9IHtcblx0XHRpc1RydXN0ZWQ6MVxuXHR9O1xuXHRmdW5jdGlvbiBtaXgob2JqZWN0LCB2YWx1ZSl7XG5cdFx0aWYoIXZhbHVlKXtcblx0XHRcdHJldHVybiBvYmplY3Q7XG5cdFx0fVxuXHRcdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0aWYoIUlOVkFMSURfUFJPUFNba2V5XSkge1xuXHRcdFx0XHRcdG9iamVjdFtrZXldID0gdmFsdWVba2V5XTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fWVsc2V7XG5cdFx0XHRvYmplY3QudmFsdWUgPSB2YWx1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIG9iamVjdDtcblx0fVxuXG5cdG9uLmVtaXQgPSBmdW5jdGlvbiAobm9kZSwgZXZlbnROYW1lLCB2YWx1ZSkge1xuXHRcdG5vZGUgPSBnZXROb2RlKG5vZGUpO1xuXHRcdHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7XG5cdFx0ZXZlbnQuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSk7IC8vIGV2ZW50IHR5cGUsIGJ1YmJsaW5nLCBjYW5jZWxhYmxlXG5cdFx0cmV0dXJuIG5vZGUuZGlzcGF0Y2hFdmVudChtaXgoZXZlbnQsIHZhbHVlKSk7XG5cdH07XG5cblx0b24uZmlyZSA9IGZ1bmN0aW9uIChub2RlLCBldmVudE5hbWUsIGV2ZW50RGV0YWlsLCBidWJibGVzKSB7XG5cdFx0dmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG5cdFx0ZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgISFidWJibGVzLCB0cnVlLCBldmVudERldGFpbCk7IC8vIGV2ZW50IHR5cGUsIGJ1YmJsaW5nLCBjYW5jZWxhYmxlXG5cdFx0cmV0dXJuIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdH07XG5cblx0b24uaXNBbHBoYU51bWVyaWMgPSBmdW5jdGlvbiAoc3RyKSB7XG5cdFx0aWYoc3RyLmxlbmd0aCA+IDEpeyByZXR1cm4gZmFsc2U7IH1cblx0XHRpZihzdHIgPT09ICcgJyl7IHJldHVybiBmYWxzZTsgfVxuXHRcdGlmKCFpc05hTihOdW1iZXIoc3RyKSkpeyByZXR1cm4gdHJ1ZTsgfVxuXHRcdHZhciBjb2RlID0gc3RyLnRvTG93ZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcblx0XHRyZXR1cm4gY29kZSA+PSA5NyAmJiBjb2RlIDw9IDEyMjtcblx0fTtcblxuXHRvbi5tYWtlTXVsdGlIYW5kbGUgPSBtYWtlTXVsdGlIYW5kbGU7XG5cdG9uLmNsb3Nlc3QgPSBjbG9zZXN0O1xuXHRvbi5tYXRjaGVzID0gbWF0Y2hlcztcblxuXHRyZXR1cm4gb247XG5cbn0pKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvb24vZGlzdC9vbi5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuRUE7QUFGQTtBQUNBO0FBd0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBbEJBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/* unknown exports provided */
/* all exports used */
/*!**************************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/store/dist/store.js ***!
  \**************************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function (define) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\n        'use strict';\n\n        function store(options) {\n            options = options || {};\n            var defaults = {\n                identifier: 'id'\n            },\n                plugins = [],\n                lastParams = '',\n                currentParams = {},\n                lastQueriedItems,\n                dataStore,\n                changes = true;\n\n            options.identifier = options.identifier || defaults.identifier;\n\n            dataStore = {\n\n                get: function get(value, optionalIdentifier) {\n                    // always returns one item or null\n                    if (!value || !this.items) {\n                        return null;\n                    }\n                    var i,\n                        key = optionalIdentifier || options.identifier;\n                    value += '';\n                    for (i = 0; i < this.items.length; i++) {\n                        if (this.items[i][key] + '' === value) {\n                            return this.items[i];\n                        }\n                    }\n                    return null;\n                },\n\n                set: function set(items) {\n                    // sets all items - overwrites existing items, if any\n                    this.clear();\n                    if (!items) {\n                        this.items = [];\n                    } else if (!Array.isArray(items)) {\n                        this.items = [items];\n                    } else {\n                        this.items = items.concat([]);\n                    }\n                    lastParams = '';\n                    currentParams = {};\n                    changes = true;\n                },\n\n                getIndex: function getIndex(item) {\n                    if ((typeof item === 'undefined' ? 'undefined' : _typeof(item)) !== 'object') {\n                        item = this.get(item);\n                    }\n                    var items = lastQueriedItems || this.items;\n                    return items.indexOf(item);\n                },\n\n                getItemByIndex: function getItemByIndex(index) {\n                    var items = lastQueriedItems || this.items;\n                    return items[index];\n                },\n\n                add: function add(itemOrItems) {\n                    // add item or items to existing\n                    if (!this.items) {\n                        return this.set(itemOrItems);\n                    }\n                    if (Array.isArray(itemOrItems)) {\n                        this.items = this.items.concat(itemOrItems);\n                    } else {\n                        this.items.push(itemOrItems);\n                    }\n                    lastParams = '';\n                    currentParams = {};\n                    changes = true;\n                },\n\n                remove: function remove(itemsOrIdOrIds) {\n                    // Removes an item or items. Expects: an ID, an item, an array of IDs, or an array of items.\n                    var i,\n                        k,\n                        items = this.items,\n                        key = options.identifier,\n                        arr = Array.isArray(itemsOrIdOrIds) ? itemsOrIdOrIds : [itemsOrIdOrIds],\n                        isId = typeof arr[0] === 'string' || typeof arr[0] === 'number';\n\n                    for (i = 0; i < arr.length; i++) {\n                        for (k = items.length - 1; k >= 0; k--) {\n                            if (isId && arr[i] === items[k][key] || arr[i] === items[k]) {\n                                items.splice(k, 1);\n                                k = items.length - 1;\n                                break;\n                            }\n                        }\n                    }\n                    lastParams = '';\n                    currentParams = {};\n                    changes = true;\n                },\n\n                clear: function clear() {\n                    // resets internally.\n                    this.items = [];\n                    lastParams = '';\n                    currentParams = {};\n                    changes = true;\n                },\n\n                fetch: function fetch() {\n                    console.error('please use query');\n                },\n\n                get hasListChanged() {\n                    return changes;\n                },\n\n                query: function query(params, altItems) {\n                    //this.params = {\n                    //    filter:{\n                    //\n                    //    },\n                    //    sort: {\n                    //\n                    //    },\n                    //    paginate: {\n                    //\n                    //    }\n                    //};\n                    if (!this.items && !altItems) {\n                        return [];\n                    }\n\n                    var i,\n                        strParams,\n                        items = altItems ? altItems.concat([]) : this.items.concat([]);\n\n                    currentParams = mix(currentParams, params);\n                    strParams = JSON.stringify(currentParams);\n                    if (items && !altItems && strParams === lastParams && lastQueriedItems) {\n                        return lastQueriedItems;\n                    }\n\n                    for (i = 0; i < plugins.length; i++) {\n                        items = plugins[i](items, currentParams, this);\n                    }\n                    if (!altItems) {\n                        lastParams = strParams;\n                        lastQueriedItems = items;\n                        changes = false;\n                    }\n                    return items;\n                },\n\n                load: function load(url) {\n                    // memory store, fetch initial data\n                    // need loaded, or is ready?\n                }\n            };\n\n            dataStore.options = options; // for plugins access\n\n            toArray(options.plugins).forEach(function (pluginName) {\n                var i,\n                    plugin = store.plugins[pluginName],\n                    order;\n\n                if (!plugin) {\n                    throw Error('plugin not found: ' + pluginName);\n                }\n\n                order = plugin.order;\n\n                if (order === 'mixin') {\n                    plugin(dataStore);\n                    return;\n                }\n\n                if (!plugins.length) {\n                    plugins.push(plugin);\n                } else if (plugins.length === 1) {\n                    if (plugins[0].order <= order) {\n                        plugins.push(plugin);\n                    } else {\n                        plugins.unshift(plugin);\n                    }\n                } else if (plugins[0].order > order) {\n                    // is first\n                    plugins.unshift(plugin);\n                } else {\n                    // is between first and last\n                    for (i = 1; i < plugins.length; i++) {\n                        if (order === plugins[i - 1].order || order > plugins[i - 1].order && order < plugins[i].order) {\n                            plugins.splice(i, 0, plugin);\n                            // inserted, continue forEach loop\n                            return;\n                        }\n                    }\n                    // was not inserted...\n                    plugins.push(plugin);\n                }\n                dataStore.plugins = plugins;\n            });\n\n            return dataStore;\n        }\n\n        store.plugins = {};\n        store.addPlugin = function (type, plugin, order) {\n            plugin.order = order || 100;\n            store.plugins[type] = plugin;\n        };\n\n        function mix(o, p) {\n            if (p) {\n                Object.keys(p).forEach(function (key) {\n                    o[key] = p[key];\n                });\n            }\n            return o;\n        }\n\n        function toArray(object) {\n            if (!object) {\n                return [];\n            }\n            if (Array.isArray(object)) {\n                return object;\n            }\n            if (typeof object === 'string') {\n                return object.split(',').map(function (s) {\n                    return s.trim();\n                });\n            }\n            console.warn('unknown plugins type:', object);\n            return [];\n        }\n\n        // simple filter:\n        // {type:'alpha'}\n        // OR filter\n        // {type:'alpha||beta'}\n        // AND filter\n        // {type: 'alpha', category: 'greek'}\n\n        function filter(items, params, store) {\n            var i,\n                filtered = [],\n                value,\n                propCount,\n                propTotal;\n            if (!params.filter) {\n                return items;\n            }\n            propTotal = Object.keys(params.filter).length;\n            for (i = 0; i < items.length; i++) {\n                propCount = 0;\n                Object.keys(params.filter).forEach(function (key) {\n                    value = params.filter[key];\n                    if (value.indexOf('||') > -1) {\n                        value.split('||').forEach(function (v) {\n                            v = v.trim();\n                            if (items[i][key] === v) {\n                                propCount++;\n                            }\n                        });\n                    } else {\n                        if (items[i][key] === value) {\n                            propCount++;\n                        }\n                    }\n                });\n                if (propCount === propTotal) {\n                    filtered.push(items[i]);\n                }\n            }\n            return filtered;\n        }\n\n        store.addPlugin('filter', filter, 10);\n\n        // paginate:\n        // {start:0, count:10}\n\n        function paginate(items, params, store) {\n            var key,\n                paginated = [];\n            if (params.paginate) {\n                return items.slice(params.paginate.start, params.paginate.start + params.paginate.count);\n            }\n            return items;\n        }\n\n        store.addPlugin('paginate', paginate, 30);\n\n        function after(obj, method, fn) {\n            var _old = obj[method];\n            obj[method] = function (a, b, c) {\n                _old.call(obj, a, b, c);\n                fn.call(obj, a, b, c);\n            };\n        }\n\n        function before(obj, method, fn) {\n            var _old = obj[method];\n            obj[method] = function (a, b, c) {\n                fn.call(obj, a, b, c);\n                _old.call(obj, a, b, c);\n            };\n        }\n\n        function findSelected(arr, multiple) {\n            arr = Array.isArray(arr) ? arr : [arr];\n            if (multiple) {\n                return arr.filter(function (item) {\n                    return item.selected;\n                });\n            }\n            for (var i = 0; i < arr.length; i++) {\n                if (arr[i].selected) {\n                    return arr[i];\n                }\n            }\n            return null;\n        }\n\n        function selection(dataStore) {\n\n            var opts = dataStore.options.selection || {},\n                multiple = !!opts.multiple,\n                selected,\n                lastSelected;\n\n            function isSelected(item) {\n                if (!Array.isArray(selected)) {\n                    return item === selected;\n                }\n                for (var i = 0; i < selected.length; i++) {\n                    if (selected[i] === item) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n\n            function select(item) {\n                // handle item property?\n                //item.selected = true;\n\n                if (!multiple) {\n                    dataStore.control = false;\n                    dataStore.shift = false;\n                }\n\n                if (multiple || dataStore.control || dataStore.shift) {\n                    if (!item) {\n                        return;\n                    }\n                    if (dataStore.control || multiple && !dataStore.shift) {\n                        if (Array.isArray(selected)) {\n                            if (selected.indexOf(item) === -1) {\n                                selected.push(item);\n                                lastSelected = item;\n                            } else {\n                                return;\n                            }\n                        } else if (selected) {\n                            selected = [selected, item];\n                        } else {\n                            selected = [item];\n                        }\n                    }\n                    if (dataStore.shift) {\n                        var a,\n                            b,\n                            i,\n                            lastItem = dataStore.getLastSelected(),\n                            lastIndex,\n                            itemIndex;\n\n                        if (!lastItem) {\n                            selected = [item];\n                        } else {\n                            if (selected && !Array.isArray(selected)) {\n                                selected = [selected];\n                            }\n                            lastIndex = dataStore.getIndex(lastItem);\n                            itemIndex = dataStore.getIndex(item);\n                            if (lastIndex < itemIndex) {\n                                a = lastIndex;\n                                b = itemIndex;\n                            } else {\n                                b = lastIndex;\n                                a = itemIndex;\n                            }\n                            for (i = a; i <= b; i++) {\n                                selected.push(dataStore.getItemByIndex(i));\n                            }\n                        }\n                    }\n                } else {\n                    //if(selected){\n                    //    selected.selected = false;\n                    //}\n                    selected = item;\n                }\n                lastSelected = item;\n            }\n\n            dataStore.getLastSelected = function () {\n                if (lastSelected) {\n                    return lastSelected;\n                }\n                if (selected) {\n                    if (Array.isArray(selected)) {\n                        return selected[selected.length - 1];\n                    } else {\n                        return selected;\n                    }\n                }\n                return null;\n            };\n\n            function unselect(item) {\n                // handle item property?\n                //item.selected = false;\n                if (Array.isArray(selected)) {\n                    selected = selected.filter(function (m) {\n                        return m !== item;\n                    });\n                } else if (item === selected) {\n                    selected = null;\n                }\n            }\n\n            after(dataStore, 'add', function (itemOrItems) {\n                var items = findSelected(itemOrItems);\n                if (items) {\n                    select(items);\n                }\n            });\n            after(dataStore, 'set', function (itemOrItems) {\n                var items = findSelected(itemOrItems);\n                if (items) {\n                    select(items);\n                }\n            });\n            before(dataStore, 'remove', function (itemOrIdOrItemsOrIds) {\n                var arr = Array.isArray(itemOrIdOrItemsOrIds) ? itemOrIdOrItemsOrIds : [itemOrIdOrItemsOrIds];\n                arr.forEach(function (itemOrId) {\n                    var item = (typeof itemOrId === 'undefined' ? 'undefined' : _typeof(itemOrId)) === 'object' ? itemOrId : dataStore.get(itemOrId);\n                    if (isSelected(item)) {\n                        unselect(item);\n                    }\n                });\n            });\n            after(dataStore, 'clear', function (itemOrItems) {\n                selected = null;\n            });\n\n            // hasSelectionChanged: can't realistically determine this\n\n            Object.defineProperty(dataStore, 'selection', {\n                get: function get() {\n                    if (!selected) {\n                        return null;\n                    }\n                    if (Array.isArray(selected)) {\n                        return dataStore.query(0, selected);\n                    }\n                    // TODO, this may need to be queried as well\n                    return multiple ? [selected] : selected;\n                },\n                set: function set(itemOrId) {\n                    function setter(itemOrId) {\n                        var item;\n                        if ((typeof itemOrId === 'undefined' ? 'undefined' : _typeof(itemOrId)) !== 'object') {\n                            item = dataStore.get(itemOrId);\n                        } else {\n                            item = itemOrId;\n                        }\n                        if (selected === item) {\n                            return;\n                        }\n\n                        select(item);\n                    }\n\n                    if (Array.isArray(itemOrId)) {\n                        if (!dataStore.control) {\n                            selected = null;\n                        }\n                        itemOrId.forEach(setter);\n                    } else {\n                        if (!dataStore.control && !dataStore.shift) {\n                            selected = null;\n                        }\n                        setter(itemOrId);\n                    }\n                }\n            });\n        }\n\n        store.addPlugin('selection', selection, 'mixin');\n\n        // sort:\n        // {key:'value', dir: 'asc'} // dir defaults to desc\n\n        var example = \"store.query({sort:{dir:'asc', key:'id'}});\";\n\n        function sort(items, params, store) {\n            var key, result;\n            if (!params.sort) {\n                return items;\n            }\n\n            if (params.sort.asc || !params.sort.key) {\n                console.error('Missing sort params. Did you mean:', example);\n            }\n            Object.keys(params.sort).forEach(function (k) {\n                if (k !== 'dir') {\n                    key = params.sort[k];\n                }\n            });\n            result = params.sort.dir === 'asc' ? -1 : 1;\n            items.sort(function (a, b) {\n                if (a[key] < b[key]) {\n                    return -result;\n                } else if (a[key] > b[key]) {\n                    return result;\n                }\n                return 0;\n            });\n            return items;\n        }\n\n        store.addPlugin('sort', sort, 20);\n\n        if (typeof customLoader === 'function') {\n            customLoader(store, 'store');\n        } else if (true) {\n            return store;\n        } else if (typeof module !== 'undefined') {\n            module.exports = store;\n        } else if (typeof window !== 'undefined') {\n            window.store = store;\n        }\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n})(__webpack_require__(/*! !webpack amd define */ 5));\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvc3RvcmUvZGlzdC9zdG9yZS5qcz9jMzg5Il0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZGVmaW5lKSB7XG5kZWZpbmUoW10sIGZ1bmN0aW9uICgpIHtcblxuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gc3RvcmUob3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiAnaWQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGx1Z2lucyA9IFtdLFxuICAgICAgICAgICAgbGFzdFBhcmFtcyA9ICcnLFxuICAgICAgICAgICAgY3VycmVudFBhcmFtcyA9IHt9LFxuICAgICAgICAgICAgbGFzdFF1ZXJpZWRJdGVtcyxcbiAgICAgICAgICAgIGRhdGFTdG9yZSxcbiAgICAgICAgICAgIGNoYW5nZXMgPSB0cnVlO1xuXG4gICAgICAgIG9wdGlvbnMuaWRlbnRpZmllciA9IG9wdGlvbnMuaWRlbnRpZmllciB8fCBkZWZhdWx0cy5pZGVudGlmaWVyO1xuXG4gICAgICAgIGRhdGFTdG9yZSA9IHtcblxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodmFsdWUsIG9wdGlvbmFsSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIC8vIGFsd2F5cyByZXR1cm5zIG9uZSBpdGVtIG9yIG51bGxcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlIHx8ICF0aGlzLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaSwga2V5ID0gb3B0aW9uYWxJZGVudGlmaWVyIHx8IG9wdGlvbnMuaWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgICB2YWx1ZSArPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pdGVtc1tpXVtrZXldKycnID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgICAgIC8vIHNldHMgYWxsIGl0ZW1zIC0gb3ZlcndyaXRlcyBleGlzdGluZyBpdGVtcywgaWYgYW55XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgIGlmKCFpdGVtcyl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZighQXJyYXkuaXNBcnJheShpdGVtcykpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gW2l0ZW1zXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcy5jb25jYXQoW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0UGFyYW1zID0gJyc7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgICAgIGNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZ2V0SW5kZXg6IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnKXtcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHRoaXMuZ2V0KGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBsYXN0UXVlcmllZEl0ZW1zIHx8IHRoaXMuaXRlbXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zLmluZGV4T2YoaXRlbSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBnZXRJdGVtQnlJbmRleDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGFzdFF1ZXJpZWRJdGVtcyB8fCB0aGlzLml0ZW1zO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtc1tpbmRleF07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChpdGVtT3JJdGVtcykge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBpdGVtIG9yIGl0ZW1zIHRvIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldChpdGVtT3JJdGVtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW1Pckl0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoaXRlbU9ySXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW1Pckl0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGFzdFBhcmFtcyA9ICcnO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGl0ZW1zT3JJZE9ySWRzKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlcyBhbiBpdGVtIG9yIGl0ZW1zLiBFeHBlY3RzOiBhbiBJRCwgYW4gaXRlbSwgYW4gYXJyYXkgb2YgSURzLCBvciBhbiBhcnJheSBvZiBpdGVtcy5cbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgaSwgaywgaXRlbXMgPSB0aGlzLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBvcHRpb25zLmlkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAgICAgIGFyciA9IEFycmF5LmlzQXJyYXkoaXRlbXNPcklkT3JJZHMpID8gaXRlbXNPcklkT3JJZHMgOiBbaXRlbXNPcklkT3JJZHNdLFxuICAgICAgICAgICAgICAgICAgICBpc0lkID0gdHlwZW9mIGFyclswXSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGFyclswXSA9PT0gJ251bWJlcic7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IGl0ZW1zLmxlbmd0aCAtIDE7IGsgPj0gMDsgay0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlzSWQgJiYgYXJyW2ldID09PSBpdGVtc1trXVtrZXldKSB8fCAoYXJyW2ldID09PSBpdGVtc1trXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGFzdFBhcmFtcyA9ICcnO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzZXRzIGludGVybmFsbHkuXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIGxhc3RQYXJhbXMgPSAnJztcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFyYW1zID0ge307XG4gICAgICAgICAgICAgICAgY2hhbmdlcyA9IHRydWU7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBmZXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3BsZWFzZSB1c2UgcXVlcnknKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGdldCBoYXNMaXN0Q2hhbmdlZCAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZXM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24gKHBhcmFtcywgYWx0SXRlbXMpIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMucGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC8vICAgIGZpbHRlcjp7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICB9LFxuICAgICAgICAgICAgICAgIC8vICAgIHNvcnQ6IHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgcGFnaW5hdGU6IHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgIH1cbiAgICAgICAgICAgICAgICAvL307XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1zICYmICFhbHRJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGksXG4gICAgICAgICAgICAgICAgICAgIHN0clBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBhbHRJdGVtcyA/IGFsdEl0ZW1zLmNvbmNhdChbXSkgOiB0aGlzLml0ZW1zLmNvbmNhdChbXSk7XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50UGFyYW1zID0gbWl4KGN1cnJlbnRQYXJhbXMsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgc3RyUGFyYW1zID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zICYmICFhbHRJdGVtcyAmJiBzdHJQYXJhbXMgPT09IGxhc3RQYXJhbXMgJiYgbGFzdFF1ZXJpZWRJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFF1ZXJpZWRJdGVtcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IHBsdWdpbnNbaV0oaXRlbXMsIGN1cnJlbnRQYXJhbXMsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZighYWx0SXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcmFtcyA9IHN0clBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgbGFzdFF1ZXJpZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgICAgICAvLyBtZW1vcnkgc3RvcmUsIGZldGNoIGluaXRpYWwgZGF0YVxuICAgICAgICAgICAgICAgIC8vIG5lZWQgbG9hZGVkLCBvciBpcyByZWFkeT9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBkYXRhU3RvcmUub3B0aW9ucyA9IG9wdGlvbnM7IC8vIGZvciBwbHVnaW5zIGFjY2Vzc1xuXG4gICAgICAgIHRvQXJyYXkob3B0aW9ucy5wbHVnaW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW5OYW1lKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICAgIHBsdWdpbiA9IHN0b3JlLnBsdWdpbnNbcGx1Z2luTmFtZV0sXG4gICAgICAgICAgICAgICAgb3JkZXI7XG5cbiAgICAgICAgICAgIGlmICghcGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3BsdWdpbiBub3QgZm91bmQ6ICcgKyBwbHVnaW5OYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3JkZXIgPSBwbHVnaW4ub3JkZXI7XG5cbiAgICAgICAgICAgIGlmIChvcmRlciA9PT0gJ21peGluJykge1xuICAgICAgICAgICAgICAgIHBsdWdpbihkYXRhU3RvcmUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFwbHVnaW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGx1Z2lucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luc1swXS5vcmRlciA8PSBvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnMudW5zaGlmdChwbHVnaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBsdWdpbnNbMF0ub3JkZXIgPiBvcmRlcikge1xuICAgICAgICAgICAgICAgIC8vIGlzIGZpcnN0XG4gICAgICAgICAgICAgICAgcGx1Z2lucy51bnNoaWZ0KHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpcyBiZXR3ZWVuIGZpcnN0IGFuZCBsYXN0XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IHBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyID09PSBwbHVnaW5zW2kgLSAxXS5vcmRlciB8fCAob3JkZXIgPiBwbHVnaW5zW2kgLSAxXS5vcmRlciAmJiBvcmRlciA8IHBsdWdpbnNbaV0ub3JkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5zLnNwbGljZShpLCAwLCBwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5zZXJ0ZWQsIGNvbnRpbnVlIGZvckVhY2ggbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHdhcyBub3QgaW5zZXJ0ZWQuLi5cbiAgICAgICAgICAgICAgICBwbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGFTdG9yZS5wbHVnaW5zID0gcGx1Z2lucztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRhdGFTdG9yZTtcbiAgICB9XG5cbiAgICBzdG9yZS5wbHVnaW5zID0ge307XG4gICAgc3RvcmUuYWRkUGx1Z2luID0gZnVuY3Rpb24gKHR5cGUsIHBsdWdpbiwgb3JkZXIpIHtcbiAgICAgICAgcGx1Z2luLm9yZGVyID0gb3JkZXIgfHwgMTAwO1xuICAgICAgICBzdG9yZS5wbHVnaW5zW3R5cGVdID0gcGx1Z2luO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtaXgobywgcCkge1xuICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgb1trZXldID0gcFtrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9BcnJheShvYmplY3QpIHtcbiAgICAgICAgaWYgKCFvYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzLnRyaW0oKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuKCd1bmtub3duIHBsdWdpbnMgdHlwZTonLCBvYmplY3QpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgXG5cblxuXG5cbiAgICAvLyBzaW1wbGUgZmlsdGVyOlxuICAgIC8vIHt0eXBlOidhbHBoYSd9XG4gICAgLy8gT1IgZmlsdGVyXG4gICAgLy8ge3R5cGU6J2FscGhhfHxiZXRhJ31cbiAgICAvLyBBTkQgZmlsdGVyXG4gICAgLy8ge3R5cGU6ICdhbHBoYScsIGNhdGVnb3J5OiAnZ3JlZWsnfVxuXG4gICAgZnVuY3Rpb24gZmlsdGVyIChpdGVtcywgcGFyYW1zLCBzdG9yZSkge1xuICAgICAgICB2YXIgaSwgZmlsdGVyZWQgPSBbXSwgdmFsdWUsIHByb3BDb3VudCwgcHJvcFRvdGFsO1xuICAgICAgICBpZighcGFyYW1zLmZpbHRlcil7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcFRvdGFsID0gT2JqZWN0LmtleXMocGFyYW1zLmZpbHRlcikubGVuZ3RoO1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBwcm9wQ291bnQgPSAwO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zLmZpbHRlcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJhbXMuZmlsdGVyW2tleV07XG4gICAgICAgICAgICAgICAgaWYodmFsdWUuaW5kZXhPZignfHwnKSA+IC0xKXtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuc3BsaXQoJ3x8JykuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHYudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldW2tleV0gPT09IHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYocHJvcENvdW50ID09PSBwcm9wVG90YWwpe1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goaXRlbXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgICB9XG5cbiAgICBzdG9yZS5hZGRQbHVnaW4oJ2ZpbHRlcicsIGZpbHRlciwgMTApO1xuXG5cblxuICAgIC8vIHBhZ2luYXRlOlxuICAgIC8vIHtzdGFydDowLCBjb3VudDoxMH1cblxuICAgIGZ1bmN0aW9uIHBhZ2luYXRlIChpdGVtcywgcGFyYW1zLCBzdG9yZSkge1xuICAgICAgICB2YXIga2V5LCBwYWdpbmF0ZWQgPSBbXTtcbiAgICAgICAgaWYocGFyYW1zLnBhZ2luYXRlKXtcbiAgICAgICAgICAgIHJldHVybiBpdGVtcy5zbGljZShwYXJhbXMucGFnaW5hdGUuc3RhcnQsIHBhcmFtcy5wYWdpbmF0ZS5zdGFydCArIHBhcmFtcy5wYWdpbmF0ZS5jb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIHN0b3JlLmFkZFBsdWdpbigncGFnaW5hdGUnLCBwYWdpbmF0ZSwgMzApO1xuXG5cblxuICAgIGZ1bmN0aW9uIGFmdGVyIChvYmosIG1ldGhvZCwgZm4pIHtcbiAgICAgICAgdmFyIF9vbGQgPSBvYmpbbWV0aG9kXTtcbiAgICAgICAgb2JqW21ldGhvZF0gPSBmdW5jdGlvbiAoYSxiLGMpIHtcbiAgICAgICAgICAgIF9vbGQuY2FsbChvYmosIGEsYixjKTtcbiAgICAgICAgICAgIGZuLmNhbGwob2JqLCBhLGIsYyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiZWZvcmUgKG9iaiwgbWV0aG9kLCBmbikge1xuICAgICAgICB2YXIgX29sZCA9IG9ialttZXRob2RdO1xuICAgICAgICBvYmpbbWV0aG9kXSA9IGZ1bmN0aW9uIChhLGIsYykge1xuICAgICAgICAgICAgZm4uY2FsbChvYmosIGEsYixjKTtcbiAgICAgICAgICAgIF9vbGQuY2FsbChvYmosIGEsYixjKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRTZWxlY3RlZCAoYXJyLCBtdWx0aXBsZSkge1xuICAgICAgICBhcnIgPSBBcnJheS5pc0FycmF5KGFycikgPyBhcnIgOiBbYXJyXTtcbiAgICAgICAgaWYobXVsdGlwbGUpe1xuICAgICAgICAgICAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5zZWxlY3RlZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYoYXJyW2ldLnNlbGVjdGVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdGlvbiAoZGF0YVN0b3JlKSB7XG5cbiAgICAgICAgdmFyXG4gICAgICAgICAgICBvcHRzID0gZGF0YVN0b3JlLm9wdGlvbnMuc2VsZWN0aW9uIHx8IHt9LFxuICAgICAgICAgICAgbXVsdGlwbGUgPSAhIW9wdHMubXVsdGlwbGUsXG4gICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgIGxhc3RTZWxlY3RlZDtcblxuICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdGVkIChpdGVtKSB7XG4gICAgICAgICAgICBpZighQXJyYXkuaXNBcnJheShzZWxlY3RlZCkpe1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBzZWxlY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoc2VsZWN0ZWRbaV0gPT09IGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZWxlY3QgKGl0ZW0pIHtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBpdGVtIHByb3BlcnR5P1xuICAgICAgICAgICAgLy9pdGVtLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYoIW11bHRpcGxlKXtcbiAgICAgICAgICAgICAgICBkYXRhU3RvcmUuY29udHJvbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRhdGFTdG9yZS5zaGlmdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihtdWx0aXBsZSB8fCBkYXRhU3RvcmUuY29udHJvbCB8fCBkYXRhU3RvcmUuc2hpZnQpe1xuICAgICAgICAgICAgICAgIGlmKCFpdGVtKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihkYXRhU3RvcmUuY29udHJvbCB8fCAobXVsdGlwbGUgJiYgIWRhdGFTdG9yZS5zaGlmdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQuaW5kZXhPZihpdGVtKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RTZWxlY3RlZCA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzZWxlY3RlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IFtzZWxlY3RlZCwgaXRlbV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IFtpdGVtXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihkYXRhU3RvcmUuc2hpZnQpe1xuICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEsIGIsIGksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbSA9IGRhdGFTdG9yZS5nZXRMYXN0U2VsZWN0ZWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCwgaXRlbUluZGV4O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCFsYXN0SXRlbSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IFtpdGVtXTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RlZCAmJiAhQXJyYXkuaXNBcnJheShzZWxlY3RlZCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gW3NlbGVjdGVkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IGRhdGFTdG9yZS5nZXRJbmRleChsYXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtSW5kZXggPSBkYXRhU3RvcmUuZ2V0SW5kZXgoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsYXN0SW5kZXggPCBpdGVtSW5kZXgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBsYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGl0ZW1JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBsYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGl0ZW1JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gYTsgaSA8PSBiOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goZGF0YVN0b3JlLmdldEl0ZW1CeUluZGV4KGkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vaWYoc2VsZWN0ZWQpe1xuICAgICAgICAgICAgICAgIC8vICAgIHNlbGVjdGVkLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBpdGVtO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0U2VsZWN0ZWQgPSBpdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YVN0b3JlLmdldExhc3RTZWxlY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmKGxhc3RTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0U2VsZWN0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzZWxlY3RlZCl7XG4gICAgICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheShzZWxlY3RlZCkpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRbc2VsZWN0ZWQubGVuZ3RoLTFdO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gdW5zZWxlY3QgKGl0ZW0pIHtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBpdGVtIHByb3BlcnR5P1xuICAgICAgICAgICAgLy9pdGVtLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHNlbGVjdGVkKSl7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBzZWxlY3RlZC5maWx0ZXIoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gIT09IGl0ZW07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9ZWxzZSBpZihpdGVtID09PSBzZWxlY3RlZCl7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYWZ0ZXIoZGF0YVN0b3JlLCAnYWRkJywgZnVuY3Rpb24gKGl0ZW1Pckl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBmaW5kU2VsZWN0ZWQoaXRlbU9ySXRlbXMpO1xuICAgICAgICAgICAgaWYoaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3QoaXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYWZ0ZXIoZGF0YVN0b3JlLCAnc2V0JywgZnVuY3Rpb24gKGl0ZW1Pckl0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBmaW5kU2VsZWN0ZWQoaXRlbU9ySXRlbXMpO1xuICAgICAgICAgICAgaWYoaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3QoaXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYmVmb3JlKGRhdGFTdG9yZSwgJ3JlbW92ZScsIGZ1bmN0aW9uIChpdGVtT3JJZE9ySXRlbXNPcklkcykge1xuICAgICAgICAgICAgdmFyIGFyciA9IEFycmF5LmlzQXJyYXkoaXRlbU9ySWRPckl0ZW1zT3JJZHMpID8gaXRlbU9ySWRPckl0ZW1zT3JJZHMgOiBbaXRlbU9ySWRPckl0ZW1zT3JJZHNdO1xuICAgICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW1PcklkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0eXBlb2YgaXRlbU9ySWQgPT09ICdvYmplY3QnID8gaXRlbU9ySWQgOiBkYXRhU3RvcmUuZ2V0KGl0ZW1PcklkKTtcbiAgICAgICAgICAgICAgICBpZihpc1NlbGVjdGVkKGl0ZW0pKXtcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3QoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZnRlcihkYXRhU3RvcmUsICdjbGVhcicsIGZ1bmN0aW9uIChpdGVtT3JJdGVtcykge1xuICAgICAgICAgICAgc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBoYXNTZWxlY3Rpb25DaGFuZ2VkOiBjYW4ndCByZWFsaXN0aWNhbGx5IGRldGVybWluZSB0aGlzXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGFTdG9yZSwgJ3NlbGVjdGlvbicsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmKCFzZWxlY3RlZCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHNlbGVjdGVkKSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhU3RvcmUucXVlcnkoMCwgc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPLCB0aGlzIG1heSBuZWVkIHRvIGJlIHF1ZXJpZWQgYXMgd2VsbFxuICAgICAgICAgICAgICAgIHJldHVybiBtdWx0aXBsZSA/IFtzZWxlY3RlZF0gOiBzZWxlY3RlZDtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGl0ZW1PcklkKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dGVyIChpdGVtT3JJZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtT3JJZCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBkYXRhU3RvcmUuZ2V0KGl0ZW1PcklkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtT3JJZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KGl0ZW1PcklkKSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFkYXRhU3RvcmUuY29udHJvbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaXRlbU9ySWQuZm9yRWFjaChzZXR0ZXIpO1xuXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFkYXRhU3RvcmUuY29udHJvbCAmJiAhZGF0YVN0b3JlLnNoaWZ0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXR0ZXIoaXRlbU9ySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RvcmUuYWRkUGx1Z2luKCdzZWxlY3Rpb24nLCBzZWxlY3Rpb24sICdtaXhpbicpO1xuXG5cblxuXG4gICAgLy8gc29ydDpcbiAgICAvLyB7a2V5Oid2YWx1ZScsIGRpcjogJ2FzYyd9IC8vIGRpciBkZWZhdWx0cyB0byBkZXNjXG5cbiAgICB2YXIgZXhhbXBsZSA9IFwic3RvcmUucXVlcnkoe3NvcnQ6e2RpcjonYXNjJywga2V5OidpZCd9fSk7XCI7XG5cbiAgICBmdW5jdGlvbiBzb3J0IChpdGVtcywgcGFyYW1zLCBzdG9yZSkge1xuICAgICAgICB2YXIga2V5LCByZXN1bHQ7XG4gICAgICAgIGlmKCFwYXJhbXMuc29ydCl7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZihwYXJhbXMuc29ydC5hc2MgfHwgIXBhcmFtcy5zb3J0LmtleSl7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIHNvcnQgcGFyYW1zLiBEaWQgeW91IG1lYW46JywgZXhhbXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zLnNvcnQpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIGlmKGsgIT09ICdkaXInKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gcGFyYW1zLnNvcnRba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHQgPSBwYXJhbXMuc29ydC5kaXIgPT09ICdhc2MnID8gLTEgOiAxO1xuICAgICAgICBpdGVtcy5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcbiAgICAgICAgICAgIGlmKGFba2V5XSA8IGJba2V5XSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC1yZXN1bHQ7XG4gICAgICAgICAgICB9ZWxzZSBpZihhW2tleV0gPiBiW2tleV0pe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG5cbiAgICBzdG9yZS5hZGRQbHVnaW4oJ3NvcnQnLCBzb3J0LCAyMCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21Mb2FkZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGN1c3RvbUxvYWRlcihzdG9yZSwgJ3N0b3JlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpe1xuICAgICAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHN0b3JlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB3aW5kb3cuc3RvcmUgPSBzdG9yZTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG59KFxuIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lIDogZnVuY3Rpb24gKGlkcywgZmFjdG9yeSkge1xuICAgIHZhciBkZXBzID0gaWRzLm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiByZXF1aXJlID09ICdmdW5jdGlvbicgPyByZXF1aXJlKGlkKSA6IHdpbmRvd1tpZF07XG4gICAgfSk7XG4gICAgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkuYXBwbHkobnVsbCwgZGVwcykgOiBmYWN0b3J5LmFwcGx5KG51bGwsIGRlcHMpO1xufVxuXG4pKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3N0b3JlL2Rpc3Qvc3RvcmUuanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdJQTtBQUNBO0FBK0lBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeENBO0FBMENBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 5 */
/* unknown exports provided */
/* all exports used */
/*!***************************************!*\
  !*** (webpack)/buildin/amd-define.js ***!
  \***************************************/
/***/ function(module, exports) {

eval("module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzPzBiYmEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 6 */
/* unknown exports provided */
/* all exports used */
/*!****************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/src/List.js ***!
  \****************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseComponent2 = __webpack_require__(/*! BaseComponent */ 0);\n\nvar _BaseComponent3 = _interopRequireDefault(_BaseComponent2);\n\nvar _properties = __webpack_require__(/*! BaseComponent/src/properties */ 8);\n\nvar _properties2 = _interopRequireDefault(_properties);\n\nvar _template = __webpack_require__(/*! BaseComponent/src/template */ 9);\n\nvar _template2 = _interopRequireDefault(_template);\n\nvar _itemTemplate = __webpack_require__(/*! BaseComponent/src/item-template */ 7);\n\nvar _itemTemplate2 = _interopRequireDefault(_itemTemplate);\n\nvar _ml = __webpack_require__(/*! ./ml */ 10);\n\nvar _ml2 = _interopRequireDefault(_ml);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n// plugins\n\n\n// library\n\n\nvar keys = __webpack_require__(/*! key-nav */ 2);\nvar store = __webpack_require__(/*! store */ 4);\nvar dom = __webpack_require__(/*! dom */ 1);\n\nvar ITEM_CLASS = 'ml-list';\nvar onDomReady = window.onDomReady;\n\n// TODO\n\n// store.save(item)?\n// list without item IDs?\n// first-item selection should be optional\n// nav-keys would be different with cells\n// virtual scrolling\n// different row templates ---?\n//  template props\n//  each\n//  if\n\n// maybes:\n// m-list instead of ml-list (css var for prefix?)\n\nvar List = function (_BaseComponent) {\n    _inherits(List, _BaseComponent);\n\n    _createClass(List, [{\n        key: 'props',\n        get: function get() {\n            return ['value', 'rowTemplateId'];\n        }\n    }, {\n        key: 'bools',\n        get: function get() {\n            return ['horizontal', 'keys', 'multiple', 'virtual', 'selectable'];\n        }\n    }], [{\n        key: 'observedAttributes',\n        get: function get() {\n            return ['horizontal', 'value', 'disabled', 'keys', 'multiple', 'virtual', 'selectable', 'rowTemplateId'];\n        }\n    }]);\n\n    function List() {\n        _classCallCheck(this, List);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _possibleConstructorReturn(this, (List.__proto__ || Object.getPrototypeOf(List)).call(this, args));\n    }\n\n    _createClass(List, [{\n        key: 'domReady',\n        value: function domReady() {\n            dom.attr(this, 'tabindex', 0);\n            if (this.children.length) {\n                this.add(formatItems([].concat(_toConsumableArray(this.children))));\n            }\n        }\n    }, {\n        key: 'renderSelection',\n        value: function renderSelection(parent) {\n            var selected = this.store.selection,\n                selNode = void 0;\n\n            if (this.selectable) {\n                dom.queryAll(this, '[selected]').forEach(function (node) {\n                    node.removeAttribute('selected');\n                });\n\n                if (selected) {\n                    if (this.multiple) {\n                        selected.forEach(function (item) {\n                            selNode = parent.querySelector('#' + item.id);\n                            selNode.setAttribute('selected', '');\n                        });\n                    } else {\n                        selNode = parent.querySelector('#' + selected.id);\n                        selNode.setAttribute('selected', '');\n                    }\n                } else {\n                    // default to first\n                    // TODO needs to be optional\n                    selNode = parent.children[0];\n                    selNode.setAttribute('selected', '');\n                    this.store.selection = selNode.id;\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n\n            var changes = this.store.hasListChanged,\n                frag = void 0,\n                items = void 0;\n\n            if (changes) {\n                items = this.store.query();\n                if (this.itemTemplate) {\n                    console.log('itemTemplate!');\n                    this.renderList(items, this);\n                } else {\n                    frag = document.createDocumentFragment();\n                    items.forEach(function (item) {\n                        frag.appendChild(toNode(item));\n                    });\n                    this.innerHTML = '';\n                    this.appendChild(frag);\n                }\n            }\n\n            this.renderSelection(this);\n\n            this.connectEvents();\n        }\n    }, {\n        key: 'add',\n        value: function add(itemOrItems) {\n            var _this2 = this;\n\n            onDomReady(this, function () {\n                if (!_this2.store) {\n                    _this2.store = store({\n                        plugins: 'filter,sort,paginate,selection',\n                        selection: { multiple: _this2.multiple }\n                    });\n                }\n                _this2.store.add(formatItems(itemOrItems));\n                _this2.render();\n            });\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            if (this.store) {\n                this.store.clear();\n            }\n        }\n    }, {\n        key: 'connectEvents',\n        value: function connectEvents() {\n            if (this.children.length && this.selectable) {\n                // && !isOwned(this tagname??)\n                if (this.keys) {\n                    _ml2.default.keys(this, { multiple: this.multiple });\n                    this.on('change', this.render.bind(this));\n                }\n                this.connectEvents = function () {};\n            }\n        }\n    }, {\n        key: 'data',\n        set: function set(itemOrItems) {\n            this.clear();\n            this.add(itemOrItems);\n        }\n    }]);\n\n    return List;\n}(_BaseComponent3.default);\n\ncustomElements.define('ml-list', List);\n\nfunction toNode(item) {\n    var attr = {\n        value: item.value\n    };\n    if (item.selected) {\n        attr.selected = true;\n    }\n    return dom('li', { html: item.label, id: item.id, className: ITEM_CLASS, attr: attr });\n}\n\nfunction formatItems(itemOrItems) {\n    return (Array.isArray(itemOrItems) ? itemOrItems : [itemOrItems]).map(function (item) {\n        if (dom.isNode(item)) {\n            return {\n                id: item.id,\n                value: item.value,\n                selected: item.selected,\n                label: item.innerHTML\n            };\n        } else {\n            return item;\n        }\n    });\n}\n\nfunction isEqual(v1, v2) {\n    return v1 === v2 || v1 + '' === v2 + '' || +v1 === +v2;\n}\n\nfunction getValue(node) {\n    if (node.value !== undefined) {\n        return node.value;\n    }\n    if (node.hasAttribute('value')) {\n        return node.getAttribute('value');\n    }\n    if (node.id) {\n        return node.id;\n    }\n    if (node.label) {\n        return node.label;\n    }\n    if (node.hasAttribute('label')) {\n        return node.getAttribute('label');\n    }\n    return node.textContent;\n}\n\nfunction getIdentifier(node) {\n    return !!node ? node.value || node.id || node : null;\n}\n\nfunction isOwned(node, tagName) {\n    while (node && node.localName !== 'body') {\n        if (node.localName === tagName) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\nexports.default = List;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvTGlzdC5qcz9iZTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gJ0Jhc2VDb21wb25lbnQnO1xuLy8gcGx1Z2luc1xuaW1wb3J0IHByb3BlcnRpZXMgZnJvbSAnQmFzZUNvbXBvbmVudC9zcmMvcHJvcGVydGllcyc7XG5pbXBvcnQgdGVtcGxhdGUgZnJvbSAnQmFzZUNvbXBvbmVudC9zcmMvdGVtcGxhdGUnO1xuaW1wb3J0IGl0ZW1UZW1wbGF0ZSBmcm9tICdCYXNlQ29tcG9uZW50L3NyYy9pdGVtLXRlbXBsYXRlJztcblxuLy8gbGlicmFyeVxuaW1wb3J0IG1sIGZyb20gJy4vbWwnO1xuY29uc3Qga2V5cyA9IHJlcXVpcmUoJ2tleS1uYXYnKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZSgnc3RvcmUnKTtcbmNvbnN0IGRvbSA9IHJlcXVpcmUoJ2RvbScpO1xuXG5jb25zdCBJVEVNX0NMQVNTID0gJ21sLWxpc3QnO1xuY29uc3Qgb25Eb21SZWFkeSA9IHdpbmRvdy5vbkRvbVJlYWR5O1xuXG4vLyBUT0RPXG5cbi8vIHN0b3JlLnNhdmUoaXRlbSk/XG4vLyBsaXN0IHdpdGhvdXQgaXRlbSBJRHM/XG4vLyBmaXJzdC1pdGVtIHNlbGVjdGlvbiBzaG91bGQgYmUgb3B0aW9uYWxcbi8vIG5hdi1rZXlzIHdvdWxkIGJlIGRpZmZlcmVudCB3aXRoIGNlbGxzXG4vLyB2aXJ0dWFsIHNjcm9sbGluZ1xuLy8gZGlmZmVyZW50IHJvdyB0ZW1wbGF0ZXMgLS0tP1xuLy8gIHRlbXBsYXRlIHByb3BzXG4vLyAgZWFjaFxuLy8gIGlmXG5cbi8vIG1heWJlczpcbi8vIG0tbGlzdCBpbnN0ZWFkIG9mIG1sLWxpc3QgKGNzcyB2YXIgZm9yIHByZWZpeD8pXG5cbmNsYXNzIExpc3QgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gWydob3Jpem9udGFsJywgJ3ZhbHVlJywgJ2Rpc2FibGVkJywgJ2tleXMnLCAnbXVsdGlwbGUnLCAndmlydHVhbCcsICdzZWxlY3RhYmxlJywgJ3Jvd1RlbXBsYXRlSWQnXTtcbiAgICB9XG5cbiAgICBnZXQgcHJvcHMgKCkge1xuICAgICAgICByZXR1cm4gWyd2YWx1ZScsICdyb3dUZW1wbGF0ZUlkJ107XG4gICAgfVxuXG4gICAgZ2V0IGJvb2xzICgpIHtcbiAgICAgICAgcmV0dXJuIFsnaG9yaXpvbnRhbCcsICdrZXlzJywgJ211bHRpcGxlJywgJ3ZpcnR1YWwnLCAnc2VsZWN0YWJsZSddO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICAgICAgc3VwZXIoYXJncyk7XG4gICAgfVxuXG4gICAgZG9tUmVhZHkoKSB7XG4gICAgICAgIGRvbS5hdHRyKHRoaXMsICd0YWJpbmRleCcsIDApO1xuICAgICAgICBpZih0aGlzLmNoaWxkcmVuLmxlbmd0aCl7XG4gICAgICAgICAgICB0aGlzLmFkZChmb3JtYXRJdGVtcyhbLi4udGhpcy5jaGlsZHJlbl0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlclNlbGVjdGlvbiAocGFyZW50KSB7XG4gICAgICAgIGxldFxuICAgICAgICAgICAgc2VsZWN0ZWQgPSB0aGlzLnN0b3JlLnNlbGVjdGlvbixcbiAgICAgICAgICAgIHNlbE5vZGU7XG5cbiAgICAgICAgaWYodGhpcy5zZWxlY3RhYmxlKSB7XG4gICAgICAgICAgICBkb20ucXVlcnlBbGwodGhpcywgJ1tzZWxlY3RlZF0nKS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsTm9kZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCgnIycgKyBpdGVtLmlkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxOb2RlLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsTm9kZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCgnIycgKyBzZWxlY3RlZC5pZCkpO1xuICAgICAgICAgICAgICAgICAgICBzZWxOb2RlLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHRvIGZpcnN0XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBuZWVkcyB0byBiZSBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHNlbE5vZGUgPSBwYXJlbnQuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgc2VsTm9kZS5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmUuc2VsZWN0aW9uID0gc2VsTm9kZS5pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcblxuICAgICAgICBsZXRcbiAgICAgICAgICAgIGNoYW5nZXMgPSB0aGlzLnN0b3JlLmhhc0xpc3RDaGFuZ2VkLFxuICAgICAgICAgICAgZnJhZyxcbiAgICAgICAgICAgIGl0ZW1zO1xuXG5cbiAgICAgICAgaWYoY2hhbmdlcykge1xuICAgICAgICAgICAgaXRlbXMgPSB0aGlzLnN0b3JlLnF1ZXJ5KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pdGVtVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaXRlbVRlbXBsYXRlIScpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTGlzdChpdGVtcywgdGhpcyk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZCh0b05vZGUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyU2VsZWN0aW9uKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY29ubmVjdEV2ZW50cygpO1xuICAgIH1cblxuICAgIGFkZCAoaXRlbU9ySXRlbXMpIHtcbiAgICAgICAgb25Eb21SZWFkeSh0aGlzLCAoKSA9PiB7XG4gICAgICAgICAgICBpZighdGhpcy5zdG9yZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZSA9IHN0b3JlKHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luczogJ2ZpbHRlcixzb3J0LHBhZ2luYXRlLHNlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjp7bXVsdGlwbGU6IHRoaXMubXVsdGlwbGV9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0b3JlLmFkZChmb3JtYXRJdGVtcyhpdGVtT3JJdGVtcykpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBzZXQgZGF0YSAoaXRlbU9ySXRlbXMpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmFkZChpdGVtT3JJdGVtcyk7XG4gICAgfVxuXG4gICAgY2xlYXIgKCkge1xuICAgICAgICBpZih0aGlzLnN0b3JlKXtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbm5lY3RFdmVudHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCAmJiB0aGlzLnNlbGVjdGFibGUpIHsgLy8gJiYgIWlzT3duZWQodGhpcyB0YWduYW1lPz8pXG4gICAgICAgICAgICBpZih0aGlzLmtleXMpIHtcbiAgICAgICAgICAgICAgICBtbC5rZXlzKHRoaXMsIHttdWx0aXBsZTogdGhpcy5tdWx0aXBsZX0pO1xuICAgICAgICAgICAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmVuZGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25uZWN0RXZlbnRzID0gZnVuY3Rpb24gKCkge31cbiAgICAgICAgfVxuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbWwtbGlzdCcsIExpc3QpO1xuXG5cbmZ1bmN0aW9uIHRvTm9kZSAoaXRlbSkge1xuICAgIGxldCBhdHRyID0ge1xuICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZVxuICAgIH07XG4gICAgaWYoaXRlbS5zZWxlY3RlZCl7XG4gICAgICAgIGF0dHIuc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZG9tKCdsaScsIHtodG1sOiBpdGVtLmxhYmVsLCBpZDogaXRlbS5pZCwgY2xhc3NOYW1lOiBJVEVNX0NMQVNTLCBhdHRyOmF0dHJ9KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0SXRlbXMoaXRlbU9ySXRlbXMpIHtcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkoaXRlbU9ySXRlbXMpID8gaXRlbU9ySXRlbXMgOiBbaXRlbU9ySXRlbXNdKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYoZG9tLmlzTm9kZShpdGVtKSl7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBpdGVtLnNlbGVjdGVkLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmlubmVySFRNTFxuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzRXF1YWwodjEsIHYyKSB7XG4gICAgcmV0dXJuIHYxID09PSB2MiB8fCB2MSArICcnID09PSB2MiArICcnIHx8ICt2MSA9PT0gK3YyO1xufVxuXG5mdW5jdGlvbiBnZXRWYWx1ZShub2RlKSB7XG4gICAgaWYgKG5vZGUudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbm9kZS52YWx1ZTtcbiAgICB9XG4gICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKCd2YWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICB9XG4gICAgaWYgKG5vZGUuaWQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuaWQ7XG4gICAgfVxuICAgIGlmIChub2RlLmxhYmVsKSB7XG4gICAgICAgIHJldHVybiBub2RlLmxhYmVsO1xuICAgIH1cbiAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoJ2xhYmVsJykpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKCdsYWJlbCcpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudDtcbn1cblxuZnVuY3Rpb24gZ2V0SWRlbnRpZmllcihub2RlKSB7XG4gICAgcmV0dXJuICEhbm9kZSA/IG5vZGUudmFsdWUgfHwgbm9kZS5pZCB8fCBub2RlIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNPd25lZChub2RlLCB0YWdOYW1lKSB7XG4gICAgd2hpbGUgKG5vZGUgJiYgbm9kZS5sb2NhbE5hbWUgIT09ICdib2R5Jykge1xuICAgICAgICBpZiAobm9kZS5sb2NhbE5hbWUgPT09IHRhZ05hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTGlzdDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL0xpc3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7O0FBUEE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBVkE7QUFDQTtBQUNBOzs7QUFVQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFuQkE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQWtCQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 7 */
/* unknown exports provided */
/* all exports used */
/*!*****************************************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/BaseComponent/src/item-template.js ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _BaseComponent = __webpack_require__(/*! ./BaseComponent */ 0);\n\nvar _BaseComponent2 = _interopRequireDefault(_BaseComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar dom = __webpack_require__(/*! dom */ 1);\n\nfunction walkDom(node, refs) {\n\n    if (node.attributes) {\n        for (var i = 0; i < node.attributes.length; i++) {\n            if (/\\{\\{/.test(node.attributes[i].value)) {\n                refs.attributes = refs.attributes || {};\n                // could be more than one??\n                // same with node?\n                refs.attributes[node.attributes[i].name] = node;\n            }\n        }\n    }\n\n    if (!node.children.length) {\n        if (/\\{\\{/.test(node.innerHTML)) {\n            refs[node.innerHTML.replace('{{', '').replace('}}', '')] = node;\n            node.innerHTML = '';\n        }\n        return;\n    }\n    for (var _i = 0; _i < node.children.length; _i++) {\n        walkDom(node.children[_i], refs);\n    }\n}\n\nfunction updateItemTemplate(frag) {\n    var refs = {};\n    walkDom(frag, refs);\n    return refs;\n}\n\n_BaseComponent2.default.prototype.renderList = function (items, container, itemTemplate) {\n    var frag = document.createDocumentFragment(),\n        tmpl = itemTemplate || this.itemTemplate,\n        refs = tmpl.itemRefs,\n        clone = void 0;\n\n    items.forEach(function (item) {\n        Object.keys(item).forEach(function (key) {\n            if (refs[key]) {\n                refs[key].innerHTML = item[key];\n            }\n        });\n        if (refs.attributes) {\n            Object.keys(refs.attributes).forEach(function (name) {\n                var node = refs.attributes[name];\n                node.setAttribute(name, item[name]);\n            });\n        }\n\n        clone = tmpl.cloneNode(true);\n        frag.appendChild(clone);\n    });\n\n    container.appendChild(frag);\n};\n\n_BaseComponent2.default.addPlugin({\n    name: 'item-template',\n    order: 40,\n    preDomReady: function preDomReady(node) {\n        node.itemTemplate = dom.query(node, 'template');\n        if (node.itemTemplate) {\n            node.itemTemplate.parentNode.removeChild(node.itemTemplate);\n            node.itemTemplate = _BaseComponent2.default.clone(node.itemTemplate);\n            node.itemTemplate.itemRefs = updateItemTemplate(node.itemTemplate);\n        }\n    }\n});\n\nexports.default = {};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvQmFzZUNvbXBvbmVudC9zcmMvaXRlbS10ZW1wbGF0ZS5qcz8xMzhjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gJy4vQmFzZUNvbXBvbmVudCc7XG5jb25zdCBkb20gPSByZXF1aXJlKCdkb20nKTtcblxuZnVuY3Rpb24gd2Fsa0RvbSAobm9kZSwgcmVmcykge1xuXG4gICAgaWYobm9kZS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYoL1xce1xcey8udGVzdChub2RlLmF0dHJpYnV0ZXNbaV0udmFsdWUpKXtcbiAgICAgICAgICAgICAgICByZWZzLmF0dHJpYnV0ZXMgPSByZWZzLmF0dHJpYnV0ZXMgfHwge307XG4gICAgICAgICAgICAgICAgLy8gY291bGQgYmUgbW9yZSB0aGFuIG9uZT8/XG4gICAgICAgICAgICAgICAgLy8gc2FtZSB3aXRoIG5vZGU/XG4gICAgICAgICAgICAgICAgcmVmcy5hdHRyaWJ1dGVzW25vZGUuYXR0cmlidXRlc1tpXS5uYW1lXSA9IG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZighbm9kZS5jaGlsZHJlbi5sZW5ndGgpe1xuICAgICAgICBpZigvXFx7XFx7Ly50ZXN0KG5vZGUuaW5uZXJIVE1MKSl7XG4gICAgICAgICAgICByZWZzW25vZGUuaW5uZXJIVE1MLnJlcGxhY2UoJ3t7JywnJykucmVwbGFjZSgnfX0nLCcnKV0gPSBub2RlO1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgd2Fsa0RvbShub2RlLmNoaWxkcmVuW2ldLCByZWZzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUl0ZW1UZW1wbGF0ZSAoZnJhZykge1xuICAgIGxldCByZWZzID0ge307XG4gICAgd2Fsa0RvbShmcmFnLCByZWZzKTtcbiAgICByZXR1cm4gcmVmcztcbn1cblxuQmFzZUNvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyTGlzdCA9IGZ1bmN0aW9uIChpdGVtcywgY29udGFpbmVyLCBpdGVtVGVtcGxhdGUpIHtcbiAgICBsZXRcbiAgICAgICAgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgICAgdG1wbCA9IGl0ZW1UZW1wbGF0ZSB8fCB0aGlzLml0ZW1UZW1wbGF0ZSxcbiAgICAgICAgcmVmcyA9IHRtcGwuaXRlbVJlZnMsXG4gICAgICAgIGNsb25lO1xuXG4gICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBPYmplY3Qua2V5cyhpdGVtKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGlmKHJlZnNba2V5XSl7XG4gICAgICAgICAgICAgICAgcmVmc1trZXldLmlubmVySFRNTCA9IGl0ZW1ba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmKHJlZnMuYXR0cmlidXRlcyl7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyZWZzLmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IHJlZnMuYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCBpdGVtW25hbWVdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvbmUgPSB0bXBsLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZyk7XG59O1xuXG5CYXNlQ29tcG9uZW50LmFkZFBsdWdpbih7XG4gICAgbmFtZTogJ2l0ZW0tdGVtcGxhdGUnLFxuICAgIG9yZGVyOiA0MCxcbiAgICBwcmVEb21SZWFkeTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgbm9kZS5pdGVtVGVtcGxhdGUgPSBkb20ucXVlcnkobm9kZSwgJ3RlbXBsYXRlJyk7XG4gICAgICAgIGlmKG5vZGUuaXRlbVRlbXBsYXRlKXtcbiAgICAgICAgICAgIG5vZGUuaXRlbVRlbXBsYXRlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZS5pdGVtVGVtcGxhdGUpO1xuICAgICAgICAgICAgbm9kZS5pdGVtVGVtcGxhdGUgPSBCYXNlQ29tcG9uZW50LmNsb25lKG5vZGUuaXRlbVRlbXBsYXRlKTtcbiAgICAgICAgICAgIG5vZGUuaXRlbVRlbXBsYXRlLml0ZW1SZWZzID0gdXBkYXRlSXRlbVRlbXBsYXRlKG5vZGUuaXRlbVRlbXBsYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB7fTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL0Jhc2VDb21wb25lbnQvc3JjL2l0ZW0tdGVtcGxhdGUuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQUNBO0FBWUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 8 */
/* unknown exports provided */
/* all exports used */
/*!**************************************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/BaseComponent/src/properties.js ***!
  \**************************************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _BaseComponent = __webpack_require__(/*! ./BaseComponent */ 0);\n\nvar _BaseComponent2 = _interopRequireDefault(_BaseComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar dom = __webpack_require__(/*! dom */ 1);\n\nfunction setBoolean(node, prop) {\n    Object.defineProperty(node, prop, {\n        enumerable: true,\n        get: function get() {\n            if (node.hasAttribute(prop)) {\n                return dom.normalize(node.getAttribute(prop));\n            }\n            return false;\n        },\n        set: function set(value) {\n            if (value) {\n                this.setAttribute(prop, '');\n            } else {\n                this.removeAttribute(prop);\n            }\n        }\n    });\n}\n\nfunction setProperty(node, prop) {\n    Object.defineProperty(node, prop, {\n        enumerable: true,\n        get: function get() {\n            return dom.normalize(this.getAttribute(prop));\n        },\n        set: function set(value) {\n            this.setAttribute(prop, value);\n        }\n    });\n}\n\nfunction setProperties(node) {\n    var props = node.props || node.properties;\n    if (props) {\n        props.forEach(function (prop) {\n            if (prop === 'disabled') {\n                setBoolean(node, prop);\n            } else {\n                setProperty(node, prop);\n            }\n        });\n    }\n}\n\nfunction setBooleans(node) {\n    var props = node.bools || node.booleans;\n    if (props) {\n        props.forEach(function (prop) {\n            setBoolean(node, prop);\n        });\n    }\n}\n\n_BaseComponent2.default.addPlugin({\n    name: 'properties',\n    order: 10,\n    init: function init(node) {\n        setProperties(node);\n        setBooleans(node);\n    },\n    preAttributeChanged: function preAttributeChanged(node, name, value) {\n        this[name] = dom.normalize(value);\n        if (!value && (node.bools || node.booleans || []).indexOf(name)) {\n            node.removeAttribute(name);\n        }\n    }\n});\n\nexports.default = {};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvQmFzZUNvbXBvbmVudC9zcmMvcHJvcGVydGllcy5qcz9iOTk1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gJy4vQmFzZUNvbXBvbmVudCc7XG5jb25zdCBkb20gPSByZXF1aXJlKCdkb20nKTtcblxuZnVuY3Rpb24gc2V0Qm9vbGVhbiAobm9kZSwgcHJvcCkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCBwcm9wLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICBpZihub2RlLmhhc0F0dHJpYnV0ZShwcm9wKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbS5ub3JtYWxpemUobm9kZS5nZXRBdHRyaWJ1dGUocHJvcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgKHZhbHVlKSB7XG4gICAgICAgICAgICBpZih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUocHJvcCwgJycpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUocHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0UHJvcGVydHkgKG5vZGUsIHByb3ApIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgcHJvcCwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQgKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRvbS5ub3JtYWxpemUodGhpcy5nZXRBdHRyaWJ1dGUocHJvcCkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShwcm9wLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0UHJvcGVydGllcyAobm9kZSkge1xuICAgIGxldCBwcm9wcyA9IG5vZGUucHJvcHMgfHwgbm9kZS5wcm9wZXJ0aWVzO1xuICAgIGlmKHByb3BzKSB7XG4gICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgIGlmKHByb3AgPT09ICdkaXNhYmxlZCcpe1xuICAgICAgICAgICAgICAgIHNldEJvb2xlYW4obm9kZSwgcHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHNldFByb3BlcnR5KG5vZGUsIHByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldEJvb2xlYW5zIChub2RlKSB7XG4gICAgbGV0IHByb3BzID0gbm9kZS5ib29scyB8fCBub2RlLmJvb2xlYW5zO1xuICAgIGlmKHByb3BzKSB7XG4gICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgIHNldEJvb2xlYW4obm9kZSwgcHJvcCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuQmFzZUNvbXBvbmVudC5hZGRQbHVnaW4oe1xuICAgIG5hbWU6ICdwcm9wZXJ0aWVzJyxcbiAgICBvcmRlcjogMTAsXG4gICAgaW5pdDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgc2V0UHJvcGVydGllcyhub2RlKTtcbiAgICAgICAgc2V0Qm9vbGVhbnMobm9kZSk7XG4gICAgfSxcbiAgICBwcmVBdHRyaWJ1dGVDaGFuZ2VkOiBmdW5jdGlvbiAobm9kZSwgbmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpc1tuYW1lXSA9IGRvbS5ub3JtYWxpemUodmFsdWUpO1xuICAgICAgICBpZighdmFsdWUgJiYgKG5vZGUuYm9vbHMgfHwgbm9kZS5ib29sZWFucyB8fCBbXSkuaW5kZXhPZihuYW1lKSl7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB7fTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL0Jhc2VDb21wb25lbnQvc3JjL3Byb3BlcnRpZXMuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQUNBO0FBY0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 9 */
/* unknown exports provided */
/* all exports used */
/*!************************************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/~/BaseComponent/src/template.js ***!
  \************************************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _BaseComponent = __webpack_require__(/*! ./BaseComponent */ 0);\n\nvar _BaseComponent2 = _interopRequireDefault(_BaseComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar dom = __webpack_require__(/*! dom */ 1);\n\nvar lightNodes = {},\n    inserted = {};\n\nfunction insert(node) {\n    if (inserted[node._uid] || !hasTemplate(node)) {\n        return;\n    }\n    collectLightNodes(node);\n    insertTemplate(node);\n    inserted[node._uid] = true;\n}\n\nfunction collectLightNodes(node) {\n    lightNodes[node._uid] = lightNodes[node._uid] || [];\n    while (node.childNodes.length) {\n        lightNodes[node._uid].push(node.removeChild(node.childNodes[0]));\n    }\n}\n\nfunction hasTemplate(node) {\n    return !!node.getTemplateNode();\n}\n\nfunction insertTemplateChain(node) {\n    var templates = node.getTemplateChain();\n    templates.reverse().forEach(function (template) {\n        getContainer(node).appendChild(_BaseComponent2.default.clone(template));\n    });\n    insertChildren(node);\n}\n\nfunction insertTemplate(node) {\n    if (node.nestedTemplate) {\n        insertTemplateChain(node);\n        return;\n    }\n    var templateNode = node.getTemplateNode();\n\n    if (templateNode) {\n        node.appendChild(_BaseComponent2.default.clone(templateNode));\n    }\n    insertChildren(node);\n}\n\nfunction getContainer(node) {\n    var containers = node.querySelectorAll('[ref=\"container\"]');\n    if (!containers || !containers.length) {\n        return node;\n    }\n    return containers[containers.length - 1];\n}\n\nfunction insertChildren(node) {\n    var i,\n        container = getContainer(node),\n        children = lightNodes[node._uid];\n\n    if (container && children && children.length) {\n        for (i = 0; i < children.length; i++) {\n            container.appendChild(children[i]);\n        }\n    }\n}\n\n_BaseComponent2.default.prototype.getLightNodes = function () {\n    return lightNodes[this._uid];\n};\n\n_BaseComponent2.default.prototype.getTemplateNode = function () {\n    // caching causes different classes to pull the same template - wat?\n    //if(!this.templateNode) {\n    if (this.templateId) {\n        this.templateNode = dom.byId(this.templateId.replace('#', ''));\n    } else if (this.templateString) {\n        this.templateNode = dom.toDom('<template>' + this.templateString + '</template>');\n    }\n    //}\n    return this.templateNode;\n};\n\n_BaseComponent2.default.prototype.getTemplateChain = function () {\n\n    var context = this,\n        templates = [],\n        template = void 0;\n\n    // walk the prototype chain; Babel doesn't allow using\n    // `super` since we are outside of the Class\n    while (context) {\n        context = Object.getPrototypeOf(context);\n        if (!context) {\n            break;\n        }\n        // skip prototypes without a template\n        // (else it will pull an inherited template and cause duplicates)\n        if (context.hasOwnProperty('templateString') || context.hasOwnProperty('templateId')) {\n            template = context.getTemplateNode();\n            if (template) {\n                templates.push(template);\n            }\n        }\n    }\n    return templates;\n};\n\n_BaseComponent2.default.addPlugin({\n    name: 'template',\n    order: 20,\n    preConnected: function preConnected(node) {\n        insert(node);\n    }\n});\n\nexports.default = {};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvQmFzZUNvbXBvbmVudC9zcmMvdGVtcGxhdGUuanM/OThkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tICcuL0Jhc2VDb21wb25lbnQnO1xuY29uc3QgZG9tID0gcmVxdWlyZSgnZG9tJyk7XG5cbnZhclxuICAgIGxpZ2h0Tm9kZXMgPSB7fSxcbiAgICBpbnNlcnRlZCA9IHt9O1xuXG5mdW5jdGlvbiBpbnNlcnQgKG5vZGUpIHtcbiAgICBpZihpbnNlcnRlZFtub2RlLl91aWRdIHx8ICFoYXNUZW1wbGF0ZShub2RlKSl7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29sbGVjdExpZ2h0Tm9kZXMobm9kZSk7XG4gICAgaW5zZXJ0VGVtcGxhdGUobm9kZSk7XG4gICAgaW5zZXJ0ZWRbbm9kZS5fdWlkXSA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RMaWdodE5vZGVzKG5vZGUpe1xuICAgIGxpZ2h0Tm9kZXNbbm9kZS5fdWlkXSA9IGxpZ2h0Tm9kZXNbbm9kZS5fdWlkXSB8fCBbXTtcbiAgICB3aGlsZShub2RlLmNoaWxkTm9kZXMubGVuZ3RoKXtcbiAgICAgICAgbGlnaHROb2Rlc1tub2RlLl91aWRdLnB1c2gobm9kZS5yZW1vdmVDaGlsZChub2RlLmNoaWxkTm9kZXNbMF0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc1RlbXBsYXRlIChub2RlKSB7XG4gICAgcmV0dXJuICEhbm9kZS5nZXRUZW1wbGF0ZU5vZGUoKTtcbn1cblxuZnVuY3Rpb24gaW5zZXJ0VGVtcGxhdGVDaGFpbiAobm9kZSkge1xuICAgIHZhciB0ZW1wbGF0ZXMgPSBub2RlLmdldFRlbXBsYXRlQ2hhaW4oKTtcbiAgICB0ZW1wbGF0ZXMucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgIGdldENvbnRhaW5lcihub2RlKS5hcHBlbmRDaGlsZChCYXNlQ29tcG9uZW50LmNsb25lKHRlbXBsYXRlKSk7XG4gICAgfSk7XG4gICAgaW5zZXJ0Q2hpbGRyZW4obm9kZSk7XG59XG5cbmZ1bmN0aW9uIGluc2VydFRlbXBsYXRlIChub2RlKSB7XG4gICAgaWYobm9kZS5uZXN0ZWRUZW1wbGF0ZSl7XG4gICAgICAgIGluc2VydFRlbXBsYXRlQ2hhaW4obm9kZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyXG4gICAgICAgIHRlbXBsYXRlTm9kZSA9IG5vZGUuZ2V0VGVtcGxhdGVOb2RlKCk7XG5cbiAgICBpZih0ZW1wbGF0ZU5vZGUpIHtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChCYXNlQ29tcG9uZW50LmNsb25lKHRlbXBsYXRlTm9kZSkpO1xuICAgIH1cbiAgICBpbnNlcnRDaGlsZHJlbihub2RlKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29udGFpbmVyIChub2RlKSB7XG4gICAgdmFyIGNvbnRhaW5lcnMgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWY9XCJjb250YWluZXJcIl0nKTtcbiAgICBpZighY29udGFpbmVycyB8fCAhY29udGFpbmVycy5sZW5ndGgpe1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRhaW5lcnNbY29udGFpbmVycy5sZW5ndGggLSAxXTtcbn1cblxuZnVuY3Rpb24gaW5zZXJ0Q2hpbGRyZW4gKG5vZGUpIHtcbiAgICB2YXIgaSxcbiAgICAgICAgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKG5vZGUpLFxuICAgICAgICBjaGlsZHJlbiA9IGxpZ2h0Tm9kZXNbbm9kZS5fdWlkXTtcblxuICAgIGlmKGNvbnRhaW5lciAmJiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGgpe1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGRyZW5baV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5CYXNlQ29tcG9uZW50LnByb3RvdHlwZS5nZXRMaWdodE5vZGVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBsaWdodE5vZGVzW3RoaXMuX3VpZF07XG59O1xuXG5CYXNlQ29tcG9uZW50LnByb3RvdHlwZS5nZXRUZW1wbGF0ZU5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gY2FjaGluZyBjYXVzZXMgZGlmZmVyZW50IGNsYXNzZXMgdG8gcHVsbCB0aGUgc2FtZSB0ZW1wbGF0ZSAtIHdhdD9cbiAgICAvL2lmKCF0aGlzLnRlbXBsYXRlTm9kZSkge1xuICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlTm9kZSA9IGRvbS5ieUlkKHRoaXMudGVtcGxhdGVJZC5yZXBsYWNlKCcjJywnJykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGVtcGxhdGVTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVOb2RlID0gZG9tLnRvRG9tKCc8dGVtcGxhdGU+JyArIHRoaXMudGVtcGxhdGVTdHJpbmcgKyAnPC90ZW1wbGF0ZT4nKTtcbiAgICAgICAgfVxuICAgIC8vfVxuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlTm9kZTtcbn07XG5cbkJhc2VDb21wb25lbnQucHJvdG90eXBlLmdldFRlbXBsYXRlQ2hhaW4gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBsZXRcbiAgICAgICAgY29udGV4dCA9IHRoaXMsXG4gICAgICAgIHRlbXBsYXRlcyA9IFtdLFxuICAgICAgICB0ZW1wbGF0ZTtcblxuICAgIC8vIHdhbGsgdGhlIHByb3RvdHlwZSBjaGFpbjsgQmFiZWwgZG9lc24ndCBhbGxvdyB1c2luZ1xuICAgIC8vIGBzdXBlcmAgc2luY2Ugd2UgYXJlIG91dHNpZGUgb2YgdGhlIENsYXNzXG4gICAgd2hpbGUoY29udGV4dCl7XG4gICAgICAgIGNvbnRleHQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY29udGV4dCk7XG4gICAgICAgIGlmKCFjb250ZXh0KXsgYnJlYWs7IH1cbiAgICAgICAgLy8gc2tpcCBwcm90b3R5cGVzIHdpdGhvdXQgYSB0ZW1wbGF0ZVxuICAgICAgICAvLyAoZWxzZSBpdCB3aWxsIHB1bGwgYW4gaW5oZXJpdGVkIHRlbXBsYXRlIGFuZCBjYXVzZSBkdXBsaWNhdGVzKVxuICAgICAgICBpZihjb250ZXh0Lmhhc093blByb3BlcnR5KCd0ZW1wbGF0ZVN0cmluZycpIHx8IGNvbnRleHQuaGFzT3duUHJvcGVydHkoJ3RlbXBsYXRlSWQnKSkge1xuICAgICAgICAgICAgdGVtcGxhdGUgPSBjb250ZXh0LmdldFRlbXBsYXRlTm9kZSgpO1xuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVzLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZXM7XG59O1xuXG5CYXNlQ29tcG9uZW50LmFkZFBsdWdpbih7XG4gICAgbmFtZTogJ3RlbXBsYXRlJyxcbiAgICBvcmRlcjogMjAsXG4gICAgcHJlQ29ubmVjdGVkOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpbnNlcnQobm9kZSk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHt9O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvQmFzZUNvbXBvbmVudC9zcmMvdGVtcGxhdGUuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 10 */
/* unknown exports provided */
/* all exports used */
/*!**************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/src/ml.js ***!
  \**************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar _keys = __webpack_require__(/*! key-nav */ 2);\nvar store = __webpack_require__(/*! store */ 4);\n\nexports.default = {\n    keys: function keys(node, options) {\n        var controller = _keys(node, { roles: true });\n        node.registerHandle(on.makeMultiHandle(controller.handles));\n        node.on('key-select', function (event) {\n            var selNode = event.detail.value;\n            node.store.selection = selNode.id;\n            node.emit('change', { value: node.store.selection });\n        });\n        if (options.multiple) {\n            node.on(document, 'keydown', function (e) {\n                switch (e.key) {\n                    case 'Meta':\n                    case 'Control':\n                    case 'Command':\n                        node.store.control = true;\n                        break;\n                    case 'Shift':\n                        node.store.shift = true;\n                        break;\n                }\n            });\n            node.on(document, 'keyup', function (e) {\n                node.store.control = false;\n                node.store.shift = false;\n            });\n        }\n    },\n\n\n    convertBracesToRefs: function convertBracesToRefs(frag) {\n        var refs = {};\n        walkDom(frag.children[0], refs);\n        return refs;\n    }\n};\n\n\nfunction walkDom(node, refs) {\n    var i;\n    if (!node.children.length) {\n        if (/\\{\\{/.test(node.innerHTML)) {\n            refs[node.innerHTML.replace('{{', '').replace('}}', '')] = node;\n            node.innerHTML = '';\n        }\n        return;\n    }\n    for (i = 0; i < node.children.length; i++) {\n        walkDom(node.children[i], refs);\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL21sLmpzPzk2MGYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qga2V5cyA9IHJlcXVpcmUoJ2tleS1uYXYnKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZSgnc3RvcmUnKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGtleXMgKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBrZXlzKG5vZGUsIHtyb2xlczp0cnVlfSk7XG4gICAgICAgIG5vZGUucmVnaXN0ZXJIYW5kbGUob24ubWFrZU11bHRpSGFuZGxlKGNvbnRyb2xsZXIuaGFuZGxlcykpO1xuICAgICAgICBub2RlLm9uKCdrZXktc2VsZWN0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgc2VsTm9kZSA9IGV2ZW50LmRldGFpbC52YWx1ZTtcbiAgICAgICAgICAgIG5vZGUuc3RvcmUuc2VsZWN0aW9uID0gc2VsTm9kZS5pZDtcbiAgICAgICAgICAgIG5vZGUuZW1pdCgnY2hhbmdlJywge3ZhbHVlOiBub2RlLnN0b3JlLnNlbGVjdGlvbn0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYob3B0aW9ucy5tdWx0aXBsZSl7XG4gICAgICAgICAgICBub2RlLm9uKGRvY3VtZW50LCAna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdNZXRhJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ29udHJvbCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NvbW1hbmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zdG9yZS5jb250cm9sID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdTaGlmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0b3JlLnNoaWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbm9kZS5vbihkb2N1bWVudCwgJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLnN0b3JlLmNvbnRyb2wgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBub2RlLnN0b3JlLnNoaWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgY29udmVydEJyYWNlc1RvUmVmczogZnVuY3Rpb24gKGZyYWcpIHtcbiAgICAgICAgdmFyIHJlZnMgPSB7fTtcbiAgICAgICAgd2Fsa0RvbShmcmFnLmNoaWxkcmVuWzBdLCByZWZzKTtcbiAgICAgICAgcmV0dXJuIHJlZnM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3YWxrRG9tIChub2RlLCByZWZzKSB7XG4gICAgdmFyIGk7XG4gICAgaWYoIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKXtcbiAgICAgICAgaWYoL1xce1xcey8udGVzdChub2RlLmlubmVySFRNTCkpe1xuICAgICAgICAgICAgcmVmc1tub2RlLmlubmVySFRNTC5yZXBsYWNlKCd7eycsJycpLnJlcGxhY2UoJ319JywnJyldID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IoaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgd2Fsa0RvbShub2RlLmNoaWxkcmVuW2ldLCByZWZzKTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9tbC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakNBO0FBQ0E7QUFDQTtBQWtDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 11 */
/* unknown exports provided */
/* all exports used */
/*!*****************************************************!*\
  !*** /Users/mwilcox/Sites/github/metl/src/build.js ***!
  \*****************************************************/
/***/ function(module, exports, __webpack_require__) {

"use strict";
eval("'use strict';\n\nvar _BaseComponent = __webpack_require__(/*! BaseComponent */ 0);\n\nvar _BaseComponent2 = _interopRequireDefault(_BaseComponent);\n\nvar _List = __webpack_require__(/*! ./List */ 6);\n\nvar _List2 = _interopRequireDefault(_List);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ncustomElements.define('base-component', _BaseComponent2.default);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2J1aWxkLmpzPzAxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSAnQmFzZUNvbXBvbmVudCc7XG5pbXBvcnQgTWxMaXN0IGZyb20gJy4vTGlzdCc7XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2Jhc2UtY29tcG9uZW50JywgQmFzZUNvbXBvbmVudCk7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvYnVpbGQuanMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);