<!doctype html>
<html>
<head>
    <title>List Demo</title>
    <link rel="import" href="../../lib/main.html">
    <link rel="import" href="./ml-test.html">
    <style>
        body{
            padding: 20px;
        }
    </style>
</head>
<body>
    <h1>ay-list demo</h1>
    <ml-test id="list">This is the innerHTML</ml-test>
    <button id="bd">destroy</button>
    <script>
        var node = dom.query('ml-test');

        node.on('attached', function (e) {
            console.log('demo.attached', e);
        });
        node.on('domready', function (e) {
            console.log('demo.domready', e);
        });
        node.on('detached', function (e) {
            console.log('demo.detached', e);
        });


        function testAddPlugin () {
            ml.create.plugins.push({
                preAttach: function (node) {
                    console.log('post.create.pre.attach');
                }
            });

            dom('ml-test', {}, document.body);
        }

        function testDetach () {
            setTimeout(function () {
                node.parentNode.removeChild(node);
                setTimeout(function () {
                    document.body.appendChild(node);
                    testAddPlugin();
                }, 300);
            }, 300);
        }
        //testDetach();

        on('bd', 'click', function () {
            node.destroy();
        });
    </script>
</body>
</html>
