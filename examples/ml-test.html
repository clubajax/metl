<template id="ml-test-template">
    <button ref="button" on="click:onButtonClick">My Button</button>
    <div>Example!</div>
    <div class="content"><label>Original HTML:</label><span ref="contentNode"></span></div>
</template>
<script>
    ml.create({
        tag: 'ml-test',
        templateId: 'ml-test-template',
        attrs:['value', 'foo'],
        created: function () {
            console.log('created', this.foo, this.value);
        },
        value: {
            get: function () {
                return this.$value;
            },
            set: function (value) {
                console.log('SET VALUE:::', value);
                this.$value = value;
            }
        },
        attached: function () {
            //console.log('attached', this._uid, this.DOMSTATE);
        },
        domReady: function () {
            //console.log('domReady', this._uid, this.DOMSTATE);
            //console.log('button:', this.button);
            this.on(window, 'resize', function () {
                console.log('resize');
            });
            this.once(window, 'resize', function () {
                console.log('resize - ONCE');
            });
            this.setLightDom();
        },
        setLightDom: function () {
            var
                content = [],
                nodes = this.getLightNodes();
            nodes.forEach(function (node) {
                console.log('node.nodeType:', node.nodeType);
                if(node.nodeType === 1){
                    this.contentNode.appendChild(node);
                }else{
                    this.contentNode.appendChild(node);
                }
                //content.push(node);
            }, this);
            //this.contentNode.innerHTML = this.getLightNodes();

        },
        addChild: function () {
            dom('div', {html:'append.child'}, this);
        },
        onButtonClick: function (e) {
            console.log('CLICK!', e);
        },
        detached: function () {
            //console.log('detached', this._uid, this.DOMSTATE);
        },
        attributeChanged: function (prop, value) {
            console.log('att change', prop, value, this.DOMSTATE);
        }
    });
</script>